/*! For license information please see main.bed62f57.js.LICENSE.txt */
(()=>{var e={888:(e,t,n)=>{"use strict";var r=n(47);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},7:(e,t,n)=>{e.exports=n(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function B(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case x:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&H(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function xe(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Ie)&&(De(),ke())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(c)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ce){Re=!1}function Le(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Me=!1,Fe=null,Ve=!1,ze=null,Ue={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ue,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(je(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,xt,Tt=!1,kt=[],Ct=null,Dt=null,Nt=null,At=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void xt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==Nt&&Vt(Nt)&&(Nt=null),At.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Bt(t,e)}if(0<kt.length){Bt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Dt&&Bt(Dt,e),null!==Nt&&Bt(Nt,e),At.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Qt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Qt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Qt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Ht,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if(Ht=null,null!==(e=vi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=F({},un,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function xn(){return In}var Tn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Nn=sn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(An),Rn=[9,13,27,32],On=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Mn=c&&"TextEvent"in window&&!Ln,Fn=c&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Hn(e){Vr(e,0)}function Yn(e){if(Q(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Gn(t,Qn,e,_e(e)),Ae(Hn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=H();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=H((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==H(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function xr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=xr("animationend"),kr=xr("animationiteration"),Cr=xr("animationstart"),Dr=xr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ar.length;Rr++){var Or=Ar[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(kr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Dr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var c=Fe;Me=!1,Fe=null,Ve||(Ve=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,u),s=l}}}if(Ve)throw e=ze,Ve=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ae((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Tr:case kr:case Cr:l=yn;break;case Dr:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&c.push(Gr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(h=je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Qr(f))p++;for(f=0,m=d;m;m=Qr(m))f++;for(;0<p-f;)c=Qr(c),p--;for(;0<f-p;)d=Qr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Qr(c),d=Qr(d)}c=null}else c=null;null!==l&&Hr(o,a,l,c,!1),null!==u&&null!==h&&Hr(o,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Kn(a))if(Xn)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(v=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,jn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Pe(n,s))&&o.unshift(Gr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Gr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function xi(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function Ti(e,t){Ei++,Si[Ei]=e.current,e.current=t}var ki={},Ci=Ii(ki),Di=Ii(!1),Ni=ki;function Ai(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){xi(Di),xi(Ci)}function Oi(e,t,n){if(Ci.current!==ki)throw Error(s(168));Ti(Ci,t),Ti(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ni=Ci.current,Ti(Ci,e),Ti(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,xi(Di),xi(Ci),Ti(Ci,e)):xi(Di),Ti(Di,n)}var Vi=null,zi=!1,Ui=!1;function Bi(e){null===Vi?Vi=[e]:Vi.push(e)}function ji(){if(!Ui&&null!==Vi){Ui=!0;var e=0,t=wt;try{var n=Vi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,zi=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),Qe(Ze,ji),i}finally{wt=t,Ui=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Qi=[],Hi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Qi[Hi++]=$i,Qi[Hi++]=Xi,Qi[Hi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=s+e}else $i=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Qi[--Hi],Qi[Hi]=null,Xi=Qi[--Hi],Qi[Hi]=null,$i=Qi[--Hi],Qi[Hi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;xi(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function xs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Ts=null;function ks(e){null===Ts?Ts=[e]:Ts.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ks(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function As(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Dl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,ks(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var zs=(new r.Component).refs;function Us(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(ru(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(ru(t,e,r,n),Ls(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=ki,s=t.contextType;return"object"===typeof s&&null!==s?s=xs(s):(i=Pi(t)?Ni:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):ki),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zs,As(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=xs(s):(s=Pi(t)?Ni:Ci.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Us(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===zs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Qs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ou(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Hs(s)===t.type)?((r=i(t,n.props)).ref=Ws(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=Ws(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mu(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case S:return(t=zu(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mu(t,e.mode,n,null)).return=e,t;Qs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Qs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Qs(t,r)}return null}function m(i,s,a,l){for(var u=null,c=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,h=g}if(m===a.length)return n(i,h),is&&Ji(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===c?u=h:c.sibling=h,c=h);return is&&Ji(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Ji(i,m),u}function g(i,a,l,u){var c=L(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,u);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?c=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Ji(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return is&&Ji(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?c=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===E){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Hs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Ws(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===E?((s=Mu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lu(o.type,o.key,o.props,null,r.mode,l)).ref=Ws(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zu(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Qs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Vu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Xs=Ys(!1),Js={},Zs=Ii(Js),eo=Ii(Js),to=Ii(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Zs),Ti(Zs,t)}function io(){xi(Zs),xi(eo),xi(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti(Zs,n))}function oo(e){eo.current===e&&(xi(Zs),xi(eo))}var ao=Ii(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function xo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function ko(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,mo.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=ko(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Po(e,t){var n=mo,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ds(e,1);null!==t&&ru(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function zo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Uo(){return ko().memoizedState}function Bo(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=zo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=ko();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=zo(t,n,s,r))}mo.flags|=e,i.memoizedState=zo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return jo(2048,8,e,t)}function Go(e,t){return jo(4,2,e,t)}function Wo(e,t){return jo(4,4,e,t)}function Qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Qo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return ko().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){ru(n,e,r,tu()),sa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,ks(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Cs(e,t,i,r))&&(ru(n,e,r,i=tu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:xs,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:xs,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:xs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,zo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:xs,useCallback:$o,useContext:xs,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:Do,useRef:Uo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(ko(),go.memoizedState,e)},useTransition:function(){return[Do(Co)[0],ko().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ua={readContext:xs,useCallback:$o,useContext:xs,useEffect:Ko,useImperativeHandle:Ho,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Xo,useReducer:No,useRef:Uo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=ko();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[No(Co)[0],ko().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Wl=r),da(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Xs(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=xo(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Ru(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Ou(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return ka(e,t,n,r,i)}function xa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,Rl),Rl|=r;return _a(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Pi(n)?Ni:Ci.current;return s=Ai(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=xo(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=xs(u):u=Ai(t,u=Pi(n)?Ni:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ks(t,o,r,u),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Di.current||Ns?("function"===typeof c&&(Us(t,n,c,r),l=t.memoizedState),(a=Ns||js(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gs(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xs(l):l=Ai(t,l=Pi(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ks(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Di.current||Ns?("function"===typeof f&&(Us(t,n,f,r),p=t.memoizedState),(u=Ns||js(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Da(e,t,n,r,s,i)}function Da(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Ra,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),e=Mu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=Mu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),ru(r,e,i,-1))}return gu(),Ua(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Qi[Hi++]=$i,Qi[Hi++]=Xi,Qi[Hi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=za(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ou(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Ou(r,a):(a=Mu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ou(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function za(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ou(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ou(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ha(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Qa(t),null;case 3:return r=t.stateNode,io(),xi(Di),xi(Ci),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Ra(e,t),Qa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Qa(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":$(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)zr(Lr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ve(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&w(e,o,c,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qa(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Qa(t),null;case 13:if(xi(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qa(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gu())),null!==t.updateQueue&&(t.flags|=4),Qa(t),null);case 4:return io(),Ra(e,t),null===e&&jr(t.stateNode.containerInfo),Qa(t),null;case 10:return Ss(t.type._context),Qa(t),null;case 19:if(xi(ao),null===(o=t.memoizedState))return Qa(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Qa(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Qa(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Qa(t),6&t.subtreeFlags&&(t.flags|=8192)):Qa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),xi(Di),xi(Ci),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xi(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){xu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){xu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Du.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){xu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){xu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){xu(e,e.return,g)}}break;case 1:gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){xu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),we(l,a);var c=we(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){xu(e,e.return,g)}}break;case 6:if(gl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){xu(e,e.return,g)}}break;case 3:if(gl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){xu(e,e.return,g)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Xe())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(c=Xa)||h,gl(t,e),Xa=c):gl(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){xu(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(d);continue}}null!==p?(p.return=f,Za=p):Sl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",a))}catch(g){xu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){xu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){xu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=$a;var u=Xa;if($a=o,(Xa=l)&&!u)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Za=l):El(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,$a=a,Xa=u}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){xu(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){xu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){xu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){xu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){xu(t,o,l)}}}catch(l){xu(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Il,xl=Math.ceil,Tl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Dl=0,Nl=null,Al=null,Pl=0,Rl=0,Ol=Ii(0),Ll=0,Ml=null,Fl=0,Vl=0,zl=0,Ul=null,Bl=null,jl=0,ql=1/0,Kl=null,Gl=!1,Wl=null,Ql=null,Hl=!1,Yl=null,$l=0,Xl=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Dl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Dl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===eu&&(eu=mt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ru(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&Dl)&&e===Nl||(e===Nl&&(0===(2&Dl)&&(Vl|=n),4===Ll&&lu(e,Pl)),iu(e,r),1===n&&0===Dl&&0===(1&t.mode)&&(ql=Xe()+500,zi&&ji()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),oi((function(){0===(6&Dl)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Zl=-1,eu=0,0!==(6&Dl))throw Error(s(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yu(e,r);else{t=r;var i=Dl;Dl|=2;var o=mu();for(Nl===e&&Pl===t||(Kl=null,ql=Xe()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}_s(),Tl.current=o,Dl=i,null!==Al?t=0:(Nl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ml,fu(e,0),lu(e,r),iu(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Su(e,Bl,Kl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=jl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Su.bind(null,e,Bl,Kl),t);break}Su(e,Bl,Kl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xl(r/1960))-r)){e.timeoutHandle=ri(Su.bind(null,e,Bl,Kl),r);break}Su(e,Bl,Kl);break;default:throw Error(s(329))}}}return iu(e,Xe()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=Bl,Bl=n,null!==t&&au(t)),e}function au(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~zl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Dl))throw Error(s(327));Eu();var t=dt(e,0);if(0===(1&t))return iu(e,Xe()),null;var n=yu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ml,fu(e,0),lu(e,t),iu(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Su(e,Bl,Kl),iu(e,Xe()),null}function cu(e,t){var n=Dl;Dl|=1;try{return e(t)}finally{0===(Dl=n)&&(ql=Xe()+500,zi&&ji())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Dl)&&Eu();var t=Dl;Dl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Dl=t))&&ji()}}function du(){Rl=Ol.current,xi(Ol)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),xi(Di),xi(Ci),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:xi(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:du()}n=n.return}if(Nl=e,Al=e=Ou(e.current,null),Pl=Rl=t,Ll=0,Ml=null,zl=Vl=Fl=0,Bl=Ul=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function pu(e,t){for(;;){var n=Al;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,kl.current=null,null===n||null===n.return){Ll=1,Ml=t,Al=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ga(o,c,t),gu();break e}u=Error(s(426))}else if(is&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Ll&&(Ll=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,u,t));break e;case 1:l=u;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ql||!Ql.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_u(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function gu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Vl)||lu(Nl,Pl)}function yu(e,t){var n=Dl;Dl|=2;var r=mu();for(Nl===e&&Pl===t||(Kl=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(_s(),Dl=n,Tl.current=r,null!==Al)throw Error(s(261));return Nl=null,Pl=0,Ll}function vu(){for(;null!==Al;)bu(Al)}function wu(){for(;null!==Al&&!Ye();)bu(Al)}function bu(e){var t=Il(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_u(e):Al=t,kl.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ha(n,t,Rl)))return void(Al=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function Su(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Eu()}while(null!==Yl);if(0!==(6&Dl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Al=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hl||(Hl=!0,Nu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Dl;Dl|=4,kl.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){xu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),yl(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),$e(),Dl=l,wt=a,Cl.transition=o}else e.current=n;if(Hl&&(Hl=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Wl,Wl=null,e;0!==(1&$l)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,ji()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Eu(){if(null!==Yl){var e=bt($l),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Dl))throw Error(s(331));var i=Dl;for(Dl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(S){xu(l,l.return,S)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Dl=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Iu(e,t,n){e=Os(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function xu(e,t,n){if(3===e.tag)Iu(e,e,n);else for(;null!==t;){if(3===t.tag){Iu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=Os(t,e=ma(t,e=ca(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Xe()-jl?fu(e,0):zl|=n),iu(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ds(e,t))&&(yt(e,t,n),iu(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Du(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),ku(e,n)}function Nu(e,t){return Qe(e,t)}function Au(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Au(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ou(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Ru(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mu(n.children,i,o,t);case I:a=8,i|=8;break;case x:return(e=Pu(12,n,t,2|i)).elementType=x,e.lanes=o,e;case D:return(e=Pu(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Pu(19,n,t,i)).elementType=N,e.lanes=o,e;case R:return Fu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case C:a=11;break e;case A:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function zu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,s,o,a,l){return e=new Uu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pu(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},As(s),e}function ju(e){if(!e)return ki;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=Bu(n,r,!0,e,0,s,0,a,l)).context=ju(null),n=e.current,(s=Rs(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Ku(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(ru(e,i,o,s),Ls(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Ti(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=xo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,As(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Da(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=gs(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Va(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Di.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Rs(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=xs(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Gs(t,r,i,n),Da(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return xa(e,t,n)}throw Error(s(156,t.tag))};var Hu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gu(o);a.call(e)}}Ku(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gu(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gu(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hu((function(){Ku(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}$u.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Ku(e,t,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Ku(null,e,null,null)})),t[pi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),iu(t,Xe()),0===(6&Dl)&&(ql=Xe()+500,ji()))}break;case 13:hu((function(){var t=Ds(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Qu(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)ru(t,e,134217728,tu());Qu(e,134217728)}},Et=function(e){if(13===e.tag){var t=nu(e),n=Ds(e,t);if(null!==n)ru(n,e,t,tu());Qu(e,t)}},It=function(){return wt},xt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));Q(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cu,De=hu;var tc={usingClientEntryPoint:!1,Events:[wi,bi,_i,Te,ke,cu]},nc={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(s(299));var n=!1,r="",i=Hu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Hu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+C(a=e[u],u);l+=D(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=D(a=a.value,t,i,c=s+C(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!I.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,R(S);else{var t=r(c);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(T),T=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,x=null,T=-1,k=5,C=-1;function D(){return!(t.unstable_now()-C<k)}function N(){if(null!==x){var e=t.unstable_now();C=e;var n=!0;try{n=x(!0,e)}finally{n?E():(I=!1,x=null)}}else I=!1}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){y(N,0)};function R(e){x=e,I||(I=!0,E())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(g?(v(T),T=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(u,e),m||p||(m=!0,R(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ae,SDK_VERSION:()=>At,_DEFAULT_ENTRY_NAME:()=>wt,_addComponent:()=>Et,_addOrOverwriteComponent:()=>It,_apps:()=>_t,_clearComponents:()=>Ct,_components:()=>St,_getProvider:()=>Tt,_registerComponent:()=>xt,_removeServiceInstance:()=>kt,deleteApp:()=>Lt,getApp:()=>Rt,getApps:()=>Ot,initializeApp:()=>Pt,onLog:()=>Ft,registerVersion:()=>Mt,setLogLevel:()=>Vt});var t,r=n(791),i=n.t(r,2),s=n(250);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const a="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function d(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:u=!1}=i,f=s.history,p=t.Pop,m=null,g=y();function y(){return(f.state||{idx:null}).idx}function v(){p=t.Pop;let e=y(),n=null==e?null:e-g;g=e,m&&m({action:p,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:d(e);return l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,f.replaceState(o({},f.state,{idx:g}),""));let b={get action(){return p},get location(){return e(s,f)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(a,v),m=e,()=>{s.removeEventListener(a,v),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){p=t.Push;let i=h(b.location,e,n);r&&r(i,e),g=y()+1;let o=c(i,g),a=b.createHref(i);try{f.pushState(o,"",a)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(a)}u&&m&&m({action:p,location:b.location,delta:1})},replace:function(e,n){p=t.Replace;let i=h(b.location,e,n);r&&r(i,e),g=y();let s=c(i,g),o=b.createHref(i);f.replaceState(s,"",o),u&&m&&m({action:p,location:b.location,delta:0})},go:e=>f.go(e)};return b}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){void 0===n&&(n="/");let r=N(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=k(i[o],D(r));return s}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(l(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=L([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,u,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:u})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=v(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:\w+$/,b=3,_=2,S=1,E=10,I=-2,x=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=I),t&&(r+=_),n.filter((e=>!x(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?S:E)),r)}function k(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:L([i,u.pathname]),pathnameBase:M(L([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=L([i,u.pathnameBase]))}return s}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return u(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return decodeURI(e)}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function R(e,t){let n=P(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function O(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=o({},e),l(!i.pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),l(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),l(!i.search||!i.search.includes("#"),A("#","search","hash",i)));let s,a=""===e||""===i.pathname,u=a?"/":i.pathname;if(null==u)s=n;else{let e=t.length-1;if(!r&&u.startsWith("..")){let t=u.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(r),hash:V(i)}}(i,s),h=u&&"/"!==u&&u.endsWith("/"),d=(a||"."===u)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!d||(c.pathname+="/"),c}const L=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],B=(new Set(U),["get",...U]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}const q=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const W=r.createContext(null);const Q=r.createContext({outlet:null,matches:[],isDataRoute:!1});const H=r.createContext(null);function Y(){return null!=r.useContext(W)}function $(){return Y()||l(!1),r.useContext(W).location}function X(e){r.useContext(G).static||r.useLayoutEffect(e)}function J(){let{isDataRoute:e}=r.useContext(Q);return e?function(){let{router:e}=ue(ae.UseNavigateStable),t=he(le.UseNavigateStable),n=r.useRef(!1);X((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,j({fromRouteId:t},i)))}),[e,t]);return i}():function(){Y()||l(!1);let e=r.useContext(q),{basename:t,future:n,navigator:i}=r.useContext(G),{matches:s}=r.useContext(Q),{pathname:o}=$(),a=JSON.stringify(R(s,n.v7_relativeSplatPath)),u=r.useRef(!1);return X((()=>{u.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!u.current)return;if("number"===typeof n)return void i.go(n);let s=O(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:L([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}const Z=r.createContext(null);function ee(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(G),{matches:s}=r.useContext(Q),{pathname:o}=$(),a=JSON.stringify(R(s,i.v7_relativeSplatPath));return r.useMemo((()=>O(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function te(e,n,i,s){Y()||l(!1);let{navigator:o}=r.useContext(G),{matches:a}=r.useContext(Q),u=a[a.length-1],c=u?u.params:{},h=(u&&u.pathname,u?u.pathnameBase:"/");u&&u.route;let d,p=$();if(n){var m;let e="string"===typeof n?f(n):n;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||l(!1),d=e}else d=p;let y=d.pathname||"/",v=g(e,{pathname:"/"===h?y:y.slice(h.length)||"/"});let w=oe(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:L([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:L([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&w?r.createElement(W.Provider,{value:{location:j({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},w):w}function ne(){let e=function(){var e;let t=r.useContext(H),n=ce(le.UseRouteError),i=he(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Q.Provider,{value:this.props.routeContext},r.createElement(H.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Q.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,u=null==(s=n)?void 0:s.errors;if(null!=u){let e=a.findIndex((e=>e.route.id&&(null==u?void 0:u[e.route.id])));e>=0||l(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,l=!1,d=null,f=null;var p;n&&(o=u&&i.route.id?u[i.route.id]:void 0,d=i.route.errorElement||re,c&&(h<0&&0===s?(p="route-fallback",!1||de[p]||(de[p]=!0),l=!0,f=null):h===s&&(l=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:l?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(ie,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let t=r.useContext(q);return t||l(!1),t}function ce(e){let t=r.useContext(K);return t||l(!1),t}function he(e){let t=function(e){let t=r.useContext(Q);return t||l(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const de={};i.startTransition;function fe(e){return function(e){let t=r.useContext(Q).outlet;return t?r.createElement(Z.Provider,{value:e},t):t}(e.context)}function pe(e){l(!1)}function me(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:u=!1,future:c}=e;Y()&&l(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:u,future:j({v7_relativeSplatPath:!1},c)})),[h,c,a,u]);"string"===typeof s&&(s=f(s));let{pathname:p="/",search:m="",hash:g="",state:y=null,key:v="default"}=s,w=r.useMemo((()=>{let e=N(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:y,key:v},navigationType:o}}),[h,p,m,g,y,v,o]);return null==w?null:r.createElement(G.Provider,{value:d},r.createElement(W.Provider,{children:i,value:w}))}function ge(e){let{children:t,location:n}=e;return te(ye(t),n)}new Promise((()=>{}));r.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==pe&&l(!1),e.props.index&&e.props.children&&l(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ye(e.props.children,s)),n.push(o)})),n}const ve=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ve(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new be;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(e){return function(e){const t=ve(e);return we.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Se=function(e){try{return we.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ee(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ee(e[n],t[n]));return e}const Ie=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,xe=()=>{try{return Ie()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Work-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Se(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Te=()=>{var e;return null===(e=xe())||void 0===e?void 0:e.config};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ce(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function De(){return!function(){var e;const t=null===(e=xe())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Ae extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Re,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ae(n,s,t)}}const Re=/\{\$([^}]+)}/g;function Oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Le(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Me(n)&&Me(s)){if(!Le(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Me(e){return null!==e&&"object"===typeof e}function Fe(e,t){const n=new Ve(e,t);return n.subscribe.bind(n)}class Ve{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ze),void 0===r.error&&(r.error=ze),void 0===r.complete&&(r.complete=ze);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ze(){}function Ue(e){return e&&e._delegate?e._delegate:e}class Be{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const je="[DEFAULT]";class qe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ke;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:je})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===je?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;return this.component?this.component.multipleInstances?e:je:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ke{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ge=[];var We;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(We||(We={}));const Qe={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},He=We.INFO,Ye={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},$e=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ye[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Xe{constructor(e){this.name=e,this._logLevel=He,this._logHandler=$e,this._userLogHandler=null,Ge.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Qe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...t),this._logHandler(this,We.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...t),this._logHandler(this,We.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,We.INFO,...t),this._logHandler(this,We.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,We.WARN,...t),this._logHandler(this,We.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,We.ERROR,...t),this._logHandler(this,We.ERROR,...t)}}const Je=(e,t)=>t.some((t=>e instanceof t));let Ze,et;const tt=new WeakMap,nt=new WeakMap,rt=new WeakMap,it=new WeakMap,st=new WeakMap;let ot={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return nt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||rt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ut(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function at(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(et||(et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ct(this),n),ut(tt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ut(e.apply(ct(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ct(this),t,...r);return rt.set(s,t.sort?t.sort():[t]),ut(s)}}function lt(e){return"function"===typeof e?at(e):(e instanceof IDBTransaction&&function(e){if(nt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));nt.set(e,t)}(e),Je(e,Ze||(Ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ot):e)}function ut(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ut(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&tt.set(t,e)})).catch((()=>{})),st.set(t,e),t}(e);if(it.has(e))return it.get(e);const t=lt(e);return t!==e&&(it.set(e,t),st.set(t,e)),t}const ct=e=>st.get(e);const ht=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],ft=new Map;function pt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ft.get(t))return ft.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ht.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ft.set(t,s),s}ot=(e=>({...e,get:(t,n,r)=>pt(t,n)||e.get(t,n,r),has:(t,n)=>!!pt(t,n)||e.has(t,n)}))(ot);class mt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const gt="@firebase/app",yt="0.9.25",vt=new Xe("@firebase/app"),wt="[DEFAULT]",bt={[gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_t=new Map,St=new Map;function Et(e,t){try{e.container.addComponent(t)}catch(n){vt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function It(e,t){e.container.addOrOverwriteComponent(t)}function xt(e){const t=e.name;if(St.has(t))return vt.debug("There were multiple attempts to register component ".concat(t,".")),!1;St.set(t,e);for(const n of _t.values())Et(n,e);return!0}function Tt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function kt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt;Tt(e,t).clearInstance(n)}function Ct(){St.clear()}const Dt=new Pe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Be("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}}const At="10.7.1";function Pt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:wt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dt.create("bad-app-name",{appName:String(i)});if(n||(n=Te()),!n)throw Dt.create("no-options");const s=_t.get(i);if(s){if(Le(n,s.options)&&Le(r,s.config))return s;throw Dt.create("duplicate-app",{appName:i})}const o=new Ke(i);for(const l of St.values())o.addComponent(l);const a=new Nt(n,r,o);return _t.set(i,a),a}function Rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt;const t=_t.get(e);if(!t&&e===wt&&Te())return Pt();if(!t)throw Dt.create("no-app",{appName:e});return t}function Ot(){return Array.from(_t.values())}async function Lt(e){const t=e.name;_t.has(t)&&(_t.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Mt(e,t,n){var r;let i=null!==(r=bt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void vt.warn(e.join(" "))}xt(new Be("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ft(e,t){if(null!==e&&"function"!==typeof e)throw Dt.create("invalid-log-argument");!function(e,t){for(const n of Ge){let r=null;t&&t.level&&(r=Qe[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:We[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Vt(e){var t;t=e,Ge.forEach((e=>{e.setLogLevel(t)}))}const zt="firebase-heartbeat-database",Ut=1,Bt="firebase-heartbeat-store";let jt=null;function qt(){return jt||(jt=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ut(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ut(o.result),e.oldVersion,e.newVersion,ut(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(zt,Ut,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Bt)}}).catch((e=>{throw Dt.create("idb-open",{originalErrorMessage:e.message})}))),jt}async function Kt(e,t){try{const n=(await qt()).transaction(Bt,"readwrite"),r=n.objectStore(Bt);await r.put(t,Gt(e)),await n.done}catch(n){if(n instanceof Ae)vt.warn(n.message);else{const e=Dt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});vt.warn(e.message)}}}function Gt(e){return"".concat(e.name,"!").concat(e.options.appId)}class Wt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ht(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qt();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Qt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Yt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=_e(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Qt(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ne()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await qt();return await t.transaction(Bt).objectStore(Bt).get(Gt(e))}catch(t){if(t instanceof Ae)vt.warn(t.message);else{const e=Dt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});vt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Kt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Yt(e){return _e(JSON.stringify({version:2,heartbeats:e})).length}var $t;$t="",xt(new Be("platform-logger",(e=>new mt(e)),"PRIVATE")),xt(new Be("heartbeat",(e=>new Wt(e)),"PRIVATE")),Mt(gt,yt,$t),Mt(gt,yt,"esm2017"),Mt("fire-js","");class Xt{constructor(e,t){this._delegate=e,this.firebase=t,Et(e,new Be("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Lt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wt;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Et(this._delegate,e)}_addOrOverwriteComponent(e){It(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Jt=new Pe("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Zt=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Pt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Oe(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Mt,setLogLevel:Vt,onLog:Ft,apps:null,SDK_VERSION:At,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(xt(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Jt.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Ee(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Oe(n,e=e||wt))throw Jt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Xt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ee(n,e)},createSubscribe:Fe,ErrorFactory:Pe,deepExtend:Ee}),n}(),en=new Xe("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){en.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&en.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tn=Zt;!function(e){Mt("@firebase/app-compat","0.2.25",e)}();tn.registerVersion("firebase","10.7.1","app-compat");var nn,rn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},sn={},on=on||{},an=rn||self;function ln(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function un(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var cn="closure_uid_"+(1e9*Math.random()>>>0),hn=0;function dn(e,t,n){return e.call.apply(e.bind,arguments)}function fn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function pn(e,t,n){return(pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dn:fn).apply(null,arguments)}function mn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function yn(){this.s=this.s,this.o=this.o}yn.prototype.s=!1,yn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,cn)&&e[cn]||(e[cn]=++hn))},yn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function wn(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function bn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ln(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function _n(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_n.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};an.addEventListener("test",e,t),an.removeEventListener("test",e,t)}catch(n){}return e}();function En(e){return/^[\s\xa0]*$/.test(e)}function In(){var e=an.navigator;return e&&(e=e.userAgent)?e:""}function xn(e){return-1!=In().indexOf(e)}function Tn(e){return Tn[" "](e),e}Tn[" "]=function(){};var kn,Cn,Dn=xn("Opera"),Nn=xn("Trident")||xn("MSIE"),An=xn("Edge"),Pn=An||Nn,Rn=xn("Gecko")&&!(-1!=In().toLowerCase().indexOf("webkit")&&!xn("Edge"))&&!(xn("Trident")||xn("MSIE"))&&!xn("Edge"),On=-1!=In().toLowerCase().indexOf("webkit")&&!xn("Edge");function Ln(){var e=an.document;return e?e.documentMode:void 0}e:{var Mn="",Fn=function(){var e=In();return Rn?/rv:([^\);]+)(\)|;)/.exec(e):An?/Edge\/([\d\.]+)/.exec(e):Nn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):On?/WebKit\/(\S+)/.exec(e):Dn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Fn&&(Mn=Fn?Fn[1]:""),Nn){var Vn=Ln();if(null!=Vn&&Vn>parseFloat(Mn)){kn=String(Vn);break e}}kn=Mn}if(an.document&&Nn){var zn=Ln();Cn=zn||(parseInt(kn,10)||void 0)}else Cn=void 0;var Un=Cn;function Bn(e,t){if(_n.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rn){e:{try{Tn(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:jn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bn.$.h.call(this)}}gn(Bn,_n);var jn={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var qn="closure_listenable_"+(1e6*Math.random()|0),Kn=0;function Gn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Kn,this.fa=this.ia=!1}function Wn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Qn(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Hn(e){const t={};for(const n in e)t[n]=e[n];return t}const Yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $n(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Yn.length;t++)n=Yn[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Xn(e){this.src=e,this.g={},this.h=0}function Jn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=vn(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Wn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zn(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Xn.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Zn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Gn(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var er="closure_lm_"+(1e6*Math.random()|0),tr={};function nr(e,t,n,r,i){if(r&&r.once)return ir(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)nr(e,t[s],n,r,i);return null}return n=hr(n),e&&e[qn]?e.O(t,n,un(r)?!!r.capture:!!r,i):rr(e,t,n,!1,r,i)}function rr(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=un(i)?!!i.capture:!!i,a=ur(e);if(a||(e[er]=a=new Xn(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=lr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Sn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ar(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ir(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ir(e,t[s],n,r,i);return null}return n=hr(n),e&&e[qn]?e.P(t,n,un(r)?!!r.capture:!!r,i):rr(e,t,n,!0,r,i)}function sr(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)sr(e,t[s],n,r,i);else r=un(r)?!!r.capture:!!r,n=hr(n),e&&e[qn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zn(s=e.g[t],n,r,i))&&(Wn(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ur(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zn(t,n,r,i)),(n=-1<e?t[e]:null)&&or(n))}function or(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[qn])Jn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ar(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ur(t))?(Jn(n,e),0==n.h&&(n.src=null,t[er]=null)):Wn(e)}}}function ar(e){return e in tr?tr[e]:tr[e]="on"+e}function lr(e,t){if(e.fa)e=!0;else{t=new Bn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&or(e),e=n.call(r,t)}return e}function ur(e){return(e=e[er])instanceof Xn?e:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function hr(e){return"function"===typeof e?e:(e[cr]||(e[cr]=function(t){return e.handleEvent(t)}),e[cr])}function dr(){yn.call(this),this.i=new Xn(this),this.S=this,this.J=null}function fr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new _n(t,e);else if(t instanceof _n)t.target=t.target||e;else{var i=t;$n(t=new _n(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=pr(o,r,!0,t)&&i}if(i=pr(o=t.g=e,r,!0,t)&&i,i=pr(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=pr(o=t.g=n[s],r,!1,t)&&i}function pr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Jn(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}gn(dr,yn),dr.prototype[qn]=!0,dr.prototype.removeEventListener=function(e,t,n,r){sr(this,e,t,n,r)},dr.prototype.N=function(){if(dr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Wn(n[r]);delete t.g[e],t.h--}}this.J=null},dr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mr=an.JSON.stringify;function gr(){var e=Er;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var yr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new vr),(e=>e.reset()));class vr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function br(e){an.setTimeout((()=>{throw e}),0)}let _r,Sr=!1,Er=new class{constructor(){this.h=this.g=null}add(e,t){const n=yr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Ir=()=>{const e=an.Promise.resolve(void 0);_r=()=>{e.then(xr)}};var xr=()=>{for(var e;e=gr();){try{e.h.call(e.g)}catch(n){br(n)}var t=yr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Sr=!1};function Tr(e,t){dr.call(this),this.h=e||1,this.g=t||an,this.j=pn(this.qb,this),this.l=Date.now()}function kr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Cr(e,t,n){if("function"===typeof e)n&&(e=pn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=pn(e.handleEvent,e)}return 2147483647<Number(t)?-1:an.setTimeout(e,t||0)}function Dr(e){e.g=Cr((()=>{e.g=null,e.i&&(e.i=!1,Dr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}gn(Tr,dr),(nn=Tr.prototype).ga=!1,nn.T=null,nn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),fr(this,"tick"),this.ga&&(kr(this),this.start()))}},nn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nn.N=function(){Tr.$.N.call(this),kr(this),delete this.g};class Nr extends yn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Dr(this)}N(){super.N(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(e){yn.call(this),this.h=e,this.g={}}gn(Ar,yn);var Pr=[];function Rr(e,t,n,r){Array.isArray(n)||(n&&(Pr[0]=n.toString()),n=Pr);for(var i=0;i<n.length;i++){var s=nr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Or(e){Qn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&or(e)}),e),e.g={}}function Lr(){this.g=!0}function Mr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return mr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Ar.prototype.N=function(){Ar.$.N.call(this),Or(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lr.prototype.Ea=function(){this.g=!1},Lr.prototype.info=function(){};var Fr={},Vr=null;function zr(){return Vr=Vr||new dr}function Ur(e){_n.call(this,Fr.Ta,e)}function Br(e){const t=zr();fr(t,new Ur(t))}function jr(e,t){_n.call(this,Fr.STAT_EVENT,e),this.stat=t}function qr(e){const t=zr();fr(t,new jr(t,e))}function Kr(e,t){_n.call(this,Fr.Ua,e),this.size=t}function Gr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return an.setTimeout((function(){e()}),t)}Fr.Ta="serverreachability",gn(Ur,_n),Fr.STAT_EVENT="statevent",gn(jr,_n),Fr.Ua="timingevent",gn(Kr,_n);var Wr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hr(){}function Yr(e){return e.h||(e.h=e.i())}function $r(){}Hr.prototype.h=null;var Xr,Jr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Zr(){_n.call(this,"d")}function ei(){_n.call(this,"c")}function ti(){}function ni(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ar(this),this.P=ii,e=Pn?125:void 0,this.V=new Tr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}gn(Zr,_n),gn(ei,_n),gn(ti,Hr),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Xr=new ti;var ii=45e3,si={},oi={};function ai(e,t,n){e.L=1,e.A=Ti(_i(t)),e.u=n,e.S=!0,li(e,null)}function li(e,t){e.G=Date.now(),di(e),e.B=_i(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),zi(n.i,"t",r),e.o=0,n=e.l.J,e.h=new ri,e.g=Us(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Nr(pn(e.Pa,e,e.g),e.O)),Rr(e.U,e.g,"readystatechange",e.nb),t=e.I?Hn(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Br(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ui(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ci(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=hi(e,n),r==oi){4==t&&(e.s=4,qr(14),i=!1),Mr(e.j,e.m,null,"[Incomplete Response]");break}if(r==si){e.s=4,qr(15),Mr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Mr(e.j,e.m,r,null),yi(e,r)}ui(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,qr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ps(t),t.M=!0,qr(11))):(Mr(e.j,e.m,n,"[Invalid Chunked Response]"),gi(e),mi(e))}function hi(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?oi:(n=Number(t.substring(n,r)),isNaN(n)?si:(r+=1)+n>t.length?oi:(t=t.slice(r,r+n),e.o=r+n,t))}function di(e){e.Y=Date.now()+e.P,fi(e,e.P)}function fi(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Gr(pn(e.lb,e),t)}function pi(e){e.C&&(an.clearTimeout(e.C),e.C=null)}function mi(e){0==e.l.H||e.J||Ls(e.l,e)}function gi(e){pi(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,kr(e.V),Or(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function yi(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wi(n.i,e)))if(!e.K&&Wi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Os(n),Is(n)}As(n),qr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Gr(pn(n.ib,n),6e3));if(1>=Gi(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Fs(n,11)}else if((e.K||n.g==e)&&Os(n),!En(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Qi(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,xi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=zs(r,r.J?r.pa:null,r.Y),o.K){Hi(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(pi(a),di(a)),r.g=o}else Ns(r);0<n.j.length&&Ts(n)}else"stop"!=u[0]&&"close"!=u[0]||Fs(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Fs(n,7):Es(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Br()}catch(u){}}function vi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ln(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ln(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ln(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(nn=ni.prototype).setTimeout=function(e){this.P=e},nn.nb=function(e){e=e.target;const t=this.M;t&&3==ys(e)?t.l():this.Pa(e)},nn.Pa=function(e){try{if(e==this.g)e:{const c=ys(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||Pn||this.g&&(this.h.h||this.g.ja()||vs(this.g)))){this.J||4!=c||7==t||Br(),pi(this);var n=this.g.da();this.ca=n;t:if(ui(this)){var r=vs(this.g);e="";var i=r.length,s=4==ys(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){gi(this),mi(this);var o="";break t}this.h.i=new an.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!En(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,qr(12),gi(this),mi(this);break e}Mr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yi(this,n)}this.S?(ci(this,c,o),Pn&&this.i&&3==c&&(Rr(this.U,this.V,"tick",this.mb),this.V.start())):(Mr(this.j,this.m,o,null),yi(this,o)),4==c&&gi(this),this.i&&!this.J&&(4==c?Ls(this.l,this):(this.i=!1,di(this)))}else(function(e){const t={};e=(e.g&&2<=ys(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(En(e[r]))continue;var n=wr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,qr(12)):(this.s=0,qr(13)),gi(this),mi(this)}}}catch(c){}},nn.mb=function(){if(this.g){var e=ys(this.g),t=this.g.ja();this.o<t.length&&(pi(this),ci(this,e,t),this.i&&4!=e&&di(this))}},nn.cancel=function(){this.J=!0,gi(this)},nn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Br(),qr(17)),gi(this),this.s=2,mi(this)):fi(this,this.Y-e)};var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bi(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof bi){this.h=e.h,Si(this,e.j),this.s=e.s,this.g=e.g,Ei(this,e.m),this.l=e.l;var t=e.i,n=new Li;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ii(this,n),this.o=e.o}else e&&(t=String(e).match(wi))?(this.h=!1,Si(this,t[1]||"",!0),this.s=ki(t[2]||""),this.g=ki(t[3]||"",!0),Ei(this,t[4]),this.l=ki(t[5]||"",!0),Ii(this,t[6]||"",!0),this.o=ki(t[7]||"")):(this.h=!1,this.i=new Li(null,this.h))}function _i(e){return new bi(e)}function Si(e,t,n){e.j=n?ki(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ei(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ii(e,t,n){t instanceof Li?(e.i=t,function(e,t){t&&!e.j&&(Mi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fi(this,t),zi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ci(t,Ri)),e.i=new Li(t,e.h))}function xi(e,t,n){e.i.set(t,n)}function Ti(e){return xi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ki(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ci(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Di),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Di(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ci(t,Ni,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ci(t,Ni,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ci(n,"/"==n.charAt(0)?Pi:Ai,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ci(n,Oi)),e.join("")};var Ni=/[#\/\?@]/g,Ai=/[#\?:]/g,Pi=/[#\?]/g,Ri=/[#\?@]/g,Oi=/#/g;function Li(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fi(e,t){Mi(e),t=Ui(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vi(e,t){return Mi(e),t=Ui(e,t),e.g.has(t)}function zi(e,t,n){Fi(e,t),0<n.length&&(e.i=null,e.g.set(Ui(e,t),wn(n)),e.h+=n.length)}function Ui(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(nn=Li.prototype).add=function(e,t){Mi(this),this.i=null,e=Ui(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},nn.forEach=function(e,t){Mi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},nn.ta=function(){Mi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},nn.Z=function(e){Mi(this);let t=[];if("string"===typeof e)Vi(this,e)&&(t=t.concat(this.g.get(Ui(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},nn.set=function(e,t){return Mi(this),this.i=null,Vi(this,e=Ui(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},nn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},nn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Bi=class{constructor(e,t){this.g=e,this.map=t}};function ji(e){this.l=e||qi,an.PerformanceNavigationTiming?e=0<(e=an.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(an.g&&an.g.Ka&&an.g.Ka()&&an.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var qi=10;function Ki(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Gi(e){return e.h?1:e.g?e.g.size:0}function Wi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qi(e,t){e.g?e.g.add(t):e.h=t}function Hi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Yi(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return wn(e.i)}ji.prototype.cancel=function(){if(this.i=Yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $i,Xi=class{stringify(e){return an.JSON.stringify(e,void 0)}parse(e){return an.JSON.parse(e,void 0)}};function Ji(){this.g=new Xi}function Zi(e,t,n){const r=n||"";try{vi(e,(function(e,n){let i=e;un(e)&&(i=mr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function es(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function ts(e){this.l=e.ec||null,this.j=e.ob||!1}function ns(e,t){dr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=rs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gn(ts,Hr),ts.prototype.g=function(){return new ns(this.l,this.j)},ts.prototype.i=($i={},function(){return $i}),gn(ns,dr);var rs=0;function is(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ss(e){e.readyState=4,e.l=null,e.j=null,e.A=null,os(e)}function os(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(nn=ns.prototype).open=function(e,t){if(this.readyState!=rs)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,os(this)},nn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||an).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},nn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ss(this)),this.readyState=rs},nn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof an.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;is(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},nn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ss(this):os(this),3==this.readyState&&is(this)}},nn.Za=function(e){this.g&&(this.response=this.responseText=e,ss(this))},nn.Ya=function(e){this.g&&(this.response=e,ss(this))},nn.ka=function(){this.g&&ss(this)},nn.setRequestHeader=function(e,t){this.v.append(e,t)},nn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},nn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var as=an.JSON.parse;function ls(e){dr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=us,this.L=this.M=!1}gn(ls,dr);var us="",cs=/^https?$/i,hs=["POST","PUT"];function ds(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fs(e),ms(e)}function fs(e){e.F||(e.F=!0,fr(e,"complete"),fr(e,"error"))}function ps(e){if(e.h&&"undefined"!=typeof on&&(!e.C[1]||4!=ys(e)||2!=e.da()))if(e.v&&4==ys(e))Cr(e.La,0,e);else if(fr(e,"readystatechange"),4==ys(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(wi)[1]||null;!i&&an.self&&an.self.location&&(i=an.self.location.protocol.slice(0,-1)),r=!cs.test(i?i.toLowerCase():"")}n=r}if(n)fr(e,"complete"),fr(e,"success");else{e.m=6;try{var s=2<ys(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",fs(e)}}finally{ms(e)}}}function ms(e,t){if(e.g){gs(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||fr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function gs(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(an.clearTimeout(e.A),e.A=null)}function ys(e){return e.g?e.g.readyState:0}function vs(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case us:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(To){return null}}function ws(e){let t="";return Qn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function bs(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ws(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xi(e,t,n))}function _s(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ss(e){this.Ga=0,this.j=[],this.l=new Lr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_s("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_s("baseRetryDelayMs",5e3,e),this.hb=_s("retryDelaySeedMs",1e4,e),this.eb=_s("forwardChannelMaxRetries",2,e),this.xa=_s("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ji(e&&e.concurrentRequestLimit),this.Ja=new Ji,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Es(e){if(xs(e),3==e.H){var t=e.W++,n=_i(e.I);if(xi(n,"SID",e.K),xi(n,"RID",t),xi(n,"TYPE","terminate"),Cs(e,n),(t=new ni(e,e.l,t)).L=2,t.A=Ti(_i(n)),n=!1,an.navigator&&an.navigator.sendBeacon)try{n=an.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&an.Image&&((new Image).src=t.A,n=!0),n||(t.g=Us(t.l,null),t.g.ha(t.A)),t.G=Date.now(),di(t)}Vs(e)}function Is(e){e.g&&(Ps(e),e.g.cancel(),e.g=null)}function xs(e){Is(e),e.u&&(an.clearTimeout(e.u),e.u=null),Os(e),e.i.cancel(),e.m&&("number"===typeof e.m&&an.clearTimeout(e.m),e.m=null)}function Ts(e){if(!Ki(e.i)&&!e.m){e.m=!0;var t=e.Na;_r||Ir(),Sr||(_r(),Sr=!0),Er.add(t,e),e.C=0}}function ks(e,t){var n;n=t?t.m:e.W++;const r=_i(e.I);xi(r,"SID",e.K),xi(r,"RID",n),xi(r,"AID",e.V),Cs(e,r),e.o&&e.s&&bs(r,e.o,e.s),n=new ni(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ds(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Qi(e.i,n),ai(n,r,t)}function Cs(e,t){e.na&&Qn(e.na,(function(e,n){xi(t,n,e)})),e.h&&vi({},(function(e,n){xi(t,n,e)}))}function Ds(e,t,n){n=Math.min(e.j.length,n);var r=e.h?pn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Zi(a,e,"req"+n+"_")}catch(qa){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ns(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_r||Ir(),Sr||(_r(),Sr=!0),Er.add(t,e),e.A=0}}function As(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Gr(pn(e.Ma,e),Ms(e,e.A)),e.A++,!0)}function Ps(e){null!=e.B&&(an.clearTimeout(e.B),e.B=null)}function Rs(e){e.g=new ni(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_i(e.wa);xi(t,"RID","rpc"),xi(t,"SID",e.K),xi(t,"AID",e.V),xi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&xi(t,"TO",e.qa),xi(t,"TYPE","xmlhttp"),Cs(e,t),e.o&&e.s&&bs(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ti(_i(t)),n.u=null,n.S=!0,li(n,e)}function Os(e){null!=e.v&&(an.clearTimeout(e.v),e.v=null)}function Ls(e,t){var n=null;if(e.g==t){Os(e),Ps(e),e.g=null;var r=2}else{if(!Wi(e.i,t))return;n=t.F,Hi(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;fr(r=zr(),new Kr(r,n)),Ts(e)}else Ns(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Gi(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Gr(pn(e.Na,e,t),Ms(e,e.C)),e.C++,!0))}(e,t)||2==r&&As(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Fs(e,5);break;case 4:Fs(e,10);break;case 3:Fs(e,6);break;default:Fs(e,2)}}function Ms(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Fs(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=pn(e.pb,e);n||(n=new bi("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||Si(n,"https"),Ti(n)),function(e,t){const n=new Lr;if(an.Image){const r=new Image;r.onload=mn(es,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mn(es,n,r,"TestLoadImage: error",!1,t),r.onabort=mn(es,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mn(es,n,r,"TestLoadImage: timeout",!1,t),an.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qr(2);e.H=0,e.h&&e.h.za(t),Vs(e),xs(e)}function Vs(e){if(e.H=0,e.ma=[],e.h){const t=Yi(e.i);0==t.length&&0==e.j.length||(bn(e.ma,t),bn(e.ma,e.j),e.i.i.length=0,wn(e.j),e.j.length=0),e.h.ya()}}function zs(e,t,n){var r=n instanceof bi?_i(n):new bi(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ei(r,r.m);else{var i=an.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new bi(null);r&&Si(s,r),t&&(s.g=t),i&&Ei(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&xi(r,n,t),xi(r,"VER",e.ra),Cs(e,r),r}function Us(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new ls(new ts({ob:n})):new ls(e.va)).Oa(e.J),t}function Bs(){}function js(){if(Nn&&!(10<=Number(Un)))throw Error("Environmental error: no available transport.")}function qs(e,t){dr.call(this),this.g=new Ss(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!En(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!En(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ws(this)}function Ks(e){Zr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Gs(){ei.call(this),this.status=1}function Ws(e){this.g=e}function Qs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Hs(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Ys(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(nn=ls.prototype).Oa=function(e){this.M=e},nn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xr.g(),this.C=this.u?Yr(this.u):Yr(Xr),this.g.onreadystatechange=pn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ds(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=an.FormData&&e instanceof an.FormData,!(0<=vn(hs,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{gs(this),0<this.B&&((this.L=function(e){return Nn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pn(this.ua,this)):this.A=Cr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ds(this,s)}},nn.ua=function(){"undefined"!=typeof on&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fr(this,"timeout"),this.abort(8))},nn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,fr(this,"complete"),fr(this,"abort"),ms(this))},nn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ms(this,!0)),ls.$.N.call(this)},nn.La=function(){this.s||(this.G||this.v||this.l?ps(this):this.kb())},nn.kb=function(){ps(this)},nn.isActive=function(){return!!this.g},nn.da=function(){try{return 2<ys(this)?this.g.status:-1}catch($i){return-1}},nn.ja=function(){try{return this.g?this.g.responseText:""}catch($i){return""}},nn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),as(t)}},nn.Ia=function(){return this.m},nn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(nn=Ss.prototype).ra=8,nn.H=1,nn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new ni(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Hn(s),$n(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ds(this,i,t),xi(n=_i(this.I),"RID",e),xi(n,"CVER",22),this.F&&xi(n,"X-HTTP-Session-Id",this.F),Cs(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(ws(s)))+"&"+t:this.o&&bs(n,this.o,s)),Qi(this.i,i),this.bb&&xi(n,"TYPE","init"),this.P?(xi(n,"$req",t),xi(n,"SID","null"),i.aa=!0,ai(i,n,null)):ai(i,n,t),this.H=2}}else 3==this.H&&(e?ks(this,e):0==this.j.length||Ki(this.i)||ks(this))},nn.Ma=function(){if(this.u=null,Rs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Gr(pn(this.jb,this),e)}},nn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qr(10),Is(this),Rs(this))},nn.ib=function(){null!=this.v&&(this.v=null,Is(this),As(this),qr(19))},nn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),qr(2)):(this.l.info("Failed to ping google.com"),qr(1))},nn.isActive=function(){return!!this.h&&this.h.isActive(this)},(nn=Bs.prototype).Ba=function(){},nn.Aa=function(){},nn.za=function(){},nn.ya=function(){},nn.isActive=function(){return!0},nn.Va=function(){},js.prototype.g=function(e,t){return new qs(e,t)},gn(qs,dr),qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;qr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=zs(e,null,e.Y),Ts(e)},qs.prototype.close=function(){Es(this.g)},qs.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=mr(e),e=n);t.j.push(new Bi(t.fb++,e)),3==t.H&&Ts(t)},qs.prototype.N=function(){this.g.h=null,delete this.j,Es(this.g),delete this.g,qs.$.N.call(this)},gn(Ks,Zr),gn(Gs,ei),gn(Ws,Bs),Ws.prototype.Ba=function(){fr(this.g,"a")},Ws.prototype.Aa=function(e){fr(this.g,new Ks(e))},Ws.prototype.za=function(e){fr(this.g,new Gs)},Ws.prototype.ya=function(){fr(this.g,"b")},gn(Qs,(function(){this.blockSize=-1})),Qs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Hs(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Hs(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Hs(this,r),i=0;break}}this.h=i,this.i+=t},Qs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var $s={};function Xs(e){return-128<=e&&128>e?function(e,t){var n=$s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ys([0|e],0>e?-1:0)})):new Ys([0|e],0>e?-1:0)}function Js(e){if(isNaN(e)||!isFinite(e))return eo;if(0>e)return so(Js(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Zs;return new Ys(t,0)}var Zs=4294967296,eo=Xs(0),to=Xs(1),no=Xs(16777216);function ro(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function io(e){return-1==e.h}function so(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ys(n,~e.h).add(to)}function oo(e,t){return e.add(so(t))}function ao(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function lo(e,t){this.g=e,this.h=t}function uo(e,t){if(ro(t))throw Error("division by zero");if(ro(e))return new lo(eo,eo);if(io(e))return t=uo(so(e),t),new lo(so(t.g),so(t.h));if(io(t))return t=uo(e,so(t)),new lo(so(t.g),t.h);if(30<e.g.length){if(io(e)||io(t))throw Error("slowDivide_ only works with positive integers.");for(var n=to,r=t;0>=r.X(e);)n=co(n),r=co(r);var i=ho(n,1),s=ho(r,1);for(r=ho(r,2),n=ho(n,2);!ro(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ho(r,1),n=ho(n,1)}return t=oo(e,i.R(t)),new lo(i,t)}for(i=eo;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Js(n)).R(t);io(o)||0<o.X(e);)o=(s=Js(n-=r)).R(t);ro(s)&&(s=to),i=i.add(s),e=oo(e,o)}return new lo(i,e)}function co(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ys(n,e.h)}function ho(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Ys(i,e.h)}(nn=Ys.prototype).ea=function(){if(io(this))return-so(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Zs+r)*t,t*=Zs}return e},nn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ro(this))return"0";if(io(this))return"-"+so(this).toString(e);for(var t=Js(Math.pow(e,6)),n=this,r="";;){var i=uo(n,t).g,s=((0<(n=oo(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ro(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},nn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},nn.X=function(e){return io(e=oo(this,e))?-1:ro(e)?0:1},nn.abs=function(){return io(this)?so(this):this},nn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ys(n,-2147483648&n[n.length-1]?-1:0)},nn.R=function(e){if(ro(this)||ro(e))return eo;if(io(this))return io(e)?so(this).R(so(e)):so(so(this).R(e));if(io(e))return so(this.R(so(e)));if(0>this.X(no)&&0>e.X(no))return Js(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,ao(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ao(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ao(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ao(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ys(n,0)},nn.gb=function(e){return uo(this,e).h},nn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ys(n,this.h&e.h)},nn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ys(n,this.h|e.h)},nn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ys(n,this.h^e.h)},js.prototype.createWebChannel=js.prototype.g,qs.prototype.send=qs.prototype.u,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,Wr.NO_ERROR=0,Wr.TIMEOUT=8,Wr.HTTP_ERROR=6,Qr.COMPLETE="complete",$r.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",dr.prototype.listen=dr.prototype.O,ls.prototype.listenOnce=ls.prototype.P,ls.prototype.getLastError=ls.prototype.Sa,ls.prototype.getLastErrorCode=ls.prototype.Ia,ls.prototype.getStatus=ls.prototype.da,ls.prototype.getResponseJson=ls.prototype.Wa,ls.prototype.getResponseText=ls.prototype.ja,ls.prototype.send=ls.prototype.ha,ls.prototype.setWithCredentials=ls.prototype.Oa,Qs.prototype.digest=Qs.prototype.l,Qs.prototype.reset=Qs.prototype.reset,Qs.prototype.update=Qs.prototype.j,Ys.prototype.add=Ys.prototype.add,Ys.prototype.multiply=Ys.prototype.R,Ys.prototype.modulo=Ys.prototype.gb,Ys.prototype.compare=Ys.prototype.X,Ys.prototype.toNumber=Ys.prototype.ea,Ys.prototype.toString=Ys.prototype.toString,Ys.prototype.getBits=Ys.prototype.D,Ys.fromNumber=Js,Ys.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return so(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Js(Math.pow(n,8)),i=eo,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Js(Math.pow(n,o)),i=i.R(o).add(Js(a))):i=(i=i.R(r)).add(Js(a))}return i};var fo=sn.createWebChannelTransport=function(){return new js},po=sn.getStatEventTarget=function(){return zr()},mo=sn.ErrorCode=Wr,go=sn.EventType=Qr,yo=sn.Event=Fr,vo=sn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},wo=(sn.FetchXmlHttpFactory=ts,sn.WebChannel=$r),bo=sn.XhrIo=ls,_o=sn.Md5=Qs,So=sn.Integer=Ys;const Eo="@firebase/firestore";class Io{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Io.UNAUTHENTICATED=new Io(null),Io.GOOGLE_CREDENTIALS=new Io("google-credentials-uid"),Io.FIRST_PARTY=new Io("first-party-uid"),Io.MOCK_USER=new Io("mock-user");let xo="10.7.0";const To=new Xe("@firebase/firestore");function ko(){return To.logLevel}function Co(e){if(To.logLevel<=We.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ao);To.debug("Firestore (".concat(xo,"): ").concat(e),...i)}}function Do(e){if(To.logLevel<=We.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ao);To.error("Firestore (".concat(xo,"): ").concat(e),...i)}}function No(e){if(To.logLevel<=We.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ao);To.warn("Firestore (".concat(xo,"): ").concat(e),...i)}}function Ao(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Po(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xo,") INTERNAL ASSERTION FAILED: ")+e;throw Do(t),new Error(t)}function Ro(e,t){e||Po()}function Oo(e,t){return e}const Lo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mo extends Ae{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Fo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class zo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Io.UNAUTHENTICATED)))}shutdown(){}}class Uo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Bo{constructor(e){this.t=e,this.currentUser=Io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fo,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Co("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Co("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fo)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Co("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ro("string"==typeof t.accessToken),new Vo(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ro(null===e||"string"==typeof e),new Io(e)}}class jo{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Io.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qo{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new jo(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Io.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ko{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Go{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Co("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Co("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Co("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Co("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ro("string"==typeof e.token),this.R=e.token,new Ko(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Wo(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Qo{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Wo(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ho(e,t){return e<t?-1:e>t?1:0}function Yo(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function $o(e){return e+"\0"}class Xo{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mo(Lo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xo.fromMillis(Date.now())}static fromDate(e){return Xo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xo(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ho(this.nanoseconds,e.nanoseconds):Ho(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jo{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jo(e)}static min(){return new Jo(new Xo(0,0))}static max(){return new Jo(new Xo(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Zo{constructor(e,t,n){void 0===t?t=0:t>e.length&&Po(),void 0===n?n=e.length-t:n>e.length-t&&Po(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zo?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ea extends Zo{construct(e,t,n){return new ea(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ea(e)}static emptyPath(){return new ea([])}}const ta=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class na extends Zo{construct(e,t,n){return new na(e,t,n)}static isValidIdentifier(e){return ta.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),na.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new na(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Mo(Lo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Mo(Lo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Mo(Lo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new na(t)}static emptyPath(){return new na([])}}class ra{constructor(e){this.path=e}static fromPath(e){return new ra(ea.fromString(e))}static fromName(e){return new ra(ea.fromString(e).popFirst(5))}static empty(){return new ra(ea.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ea.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ea.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ra(new ea(e.slice()))}}class ia{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function sa(e){return e.fields.find((e=>2===e.kind))}function oa(e){return e.fields.filter((e=>2!==e.kind))}ia.UNKNOWN_ID=-1;class aa{constructor(e,t){this.fieldPath=e,this.kind=t}}class la{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new la(0,ha.min())}}function ua(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jo.fromTimestamp(1e9===r?new Xo(n+1,0):new Xo(n,r));return new ha(i,ra.empty(),t)}function ca(e){return new ha(e.readTime,e.key,-1)}class ha{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ha(Jo.min(),ra.empty(),-1)}static max(){return new ha(Jo.max(),ra.empty(),-1)}}function da(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ra.comparator(e.documentKey,t.documentKey),0!==n?n:Ho(e.largestBatchId,t.largestBatchId))}const fa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ma(e){if(e.code!==Lo.FAILED_PRECONDITION||e.message!==fa)throw e;Co("LocalStore","Unexpectedly lost primary lease")}class ga{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Po(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ga(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ga?t:ga.resolve(t)}catch(e){return ga.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ga.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ga.reject(t)}static resolve(e){return new ga(((t,n)=>{t(e)}))}static reject(e){return new ga(((t,n)=>{n(e)}))}static waitFor(e){return new ga(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=ga.resolve(!1);for(const n of e)t=t.next((e=>e?ga.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new ga(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new ga(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ya{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Fo,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ba(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=xa(t.target.error);this.V.reject(new ba(e,n))}}static open(e,t,n,r){try{return new ya(t,e.transaction(r,n))}catch(e){throw new ba(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Co("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Sa(t)}}class va{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===va.S(Ce())&&Do("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Co("SimpleDb","Removing database:",e),Ea(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ne())return!1;if(va.C())return!0;const e=Ce(),t=va.S(e),n=0<t&&t<10,r=va.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Work-demo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Co("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ba(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Mo(Lo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Mo(Lo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ba(e,r))},r.onupgradeneeded=e=>{Co("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Co("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=ya.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),ga.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Co("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class wa{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ea(this.k.delete())}}class ba extends Mo{constructor(e,t){super(Lo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function _a(e){return"IndexedDbTransactionError"===e.name}class Sa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Co("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Co("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ea(n)}add(e){return Co("SimpleDb","ADD",this.store.name,e,e),Ea(this.store.add(e))}get(e){return Ea(this.store.get(e)).next((t=>(void 0===t&&(t=null),Co("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Co("SimpleDb","DELETE",this.store.name,e),Ea(this.store.delete(e))}count(){return Co("SimpleDb","COUNT",this.store.name),Ea(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new ga(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new ga(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Co("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new ga(((n,r)=>{t.onerror=e=>{const t=xa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new ga(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new wa(i),o=t(i.primaryKey,i.value,s);if(o instanceof ga){const e=o.catch((e=>(s.done(),ga.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>ga.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ea(e){return new ga(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=xa(e.target.error);n(t)}}))}let Ia=!1;function xa(e){const t=va.S(Ce());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ia||(Ia=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ta{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Co("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Co("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){_a(e)?Co("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await ma(e)}await this.ee(6e4)}))}}class ka{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return ga.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Co("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Co("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ca(t);da(r,n)>0&&(n=r)})),new ha(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Da(e){return null==e}function Na(e){return 0===e&&1/e==-1/0}function Aa(e){return"number"==typeof e&&Number.isInteger(e)&&!Na(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Pa(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Oa(t)),t=Ra(e.get(n),t);return Oa(t)}function Ra(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Oa(e){return e+"\x01\x01"}function La(e){const t=e.length;if(Ro(t>=2),2===t)return Ro("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ea.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Po(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Po()}s=t+2}return new ea(r)}Ca._e=-1;const Ma=["userId","batchId"];function Fa(e,t){return[e,Pa(t)]}function Va(e,t,n){return[e,Pa(t),n]}const za={},Ua=["prefixPath","collectionGroup","readTime","documentId"],Ba=["prefixPath","collectionGroup","documentId"],ja=["collectionGroup","readTime","prefixPath","documentId"],qa=["canonicalId","targetId"],Ka=["targetId","path"],Ga=["path","targetId"],Wa=["collectionId","parent"],Qa=["indexId","uid"],Ha=["uid","sequenceNumber"],Ya=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$a=["indexId","uid","orderedDocumentKey"],Xa=["userId","collectionPath","documentId"],Ja=["userId","collectionPath","largestBatchId"],Za=["userId","collectionGroup","largestBatchId"],el=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tl=[...el,"documentOverlays"],nl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rl=nl,il=[...rl,"indexConfiguration","indexState","indexEntries"];class sl extends pa{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function ol(e,t){const n=Oo(e);return va.M(n.ae,t)}function al(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ll(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ul(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cl{constructor(e,t){this.comparator=e,this.root=t||dl.EMPTY}insert(e,t){return new cl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dl.BLACK,null,null))}remove(e){return new cl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dl.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hl(this.root,e,this.comparator,!0)}}class hl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dl{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:dl.RED,this.left=null!=r?r:dl.EMPTY,this.right=null!=i?i:dl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new dl(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return dl.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Po();if(this.right.isRed())throw Po();const e=this.left.check();if(e!==this.right.check())throw Po();return e+(this.isRed()?0:1)}}dl.EMPTY=null,dl.RED=!0,dl.BLACK=!1,dl.EMPTY=new class{constructor(){this.size=0}get key(){throw Po()}get value(){throw Po()}get color(){throw Po()}get left(){throw Po()}get right(){throw Po()}copy(e,t,n,r,i){return this}insert(e,t,n){return new dl(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fl{constructor(e){this.comparator=e,this.data=new cl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pl(this.data.getIterator())}getIteratorFrom(e){return new pl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof fl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new fl(this.comparator);return t.data=e,t}}class pl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ml(e){return e.hasNext()?e.getNext():void 0}class gl{constructor(e){this.fields=e,e.sort(na.comparator)}static empty(){return new gl([])}unionWith(e){let t=new fl(na.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class yl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yl("Invalid base64 string: "+e):e}}(e);return new vl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ho(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vl.EMPTY_BYTE_STRING=new vl("");const wl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(e){if(Ro(!!e),"string"==typeof e){let t=0;const n=wl.exec(e);if(Ro(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_l(e.seconds),nanos:_l(e.nanos)}}function _l(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Sl(e){return"string"==typeof e?vl.fromBase64String(e):vl.fromUint8Array(e)}function El(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Il(e){const t=e.mapValue.fields.__previous_value__;return El(t)?Il(t):t}function xl(e){const t=bl(e.mapValue.fields.__local_write_time__.timestampValue);return new Xo(t.seconds,t.nanos)}class Tl{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class kl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new kl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}const Cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Dl={nullValue:"NULL_VALUE"};function Nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?El(e)?4:Kl(e)?9007199254740991:10:Po()}function Al(e,t){if(e===t)return!0;const n=Nl(e);if(n!==Nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xl(e).isEqual(xl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bl(e.timestampValue),r=bl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Sl(e.bytesValue).isEqual(Sl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _l(e.geoPointValue.latitude)===_l(t.geoPointValue.latitude)&&_l(e.geoPointValue.longitude)===_l(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _l(e.integerValue)===_l(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=_l(e.doubleValue),r=_l(t.doubleValue);return n===r?Na(n)===Na(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Yo(e.arrayValue.values||[],t.arrayValue.values||[],Al);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(al(n)!==al(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Al(n[i],r[i])))return!1;return!0}(e,t);default:return Po()}}function Pl(e,t){return void 0!==(e.values||[]).find((e=>Al(e,t)))}function Rl(e,t){if(e===t)return 0;const n=Nl(e),r=Nl(t);if(n!==r)return Ho(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ho(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=_l(e.integerValue||e.doubleValue),r=_l(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ol(e.timestampValue,t.timestampValue);case 4:return Ol(xl(e),xl(t));case 5:return Ho(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Sl(e),r=Sl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ho(n[i],r[i]);if(0!==e)return e}return Ho(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ho(_l(e.latitude),_l(t.latitude));return 0!==n?n:Ho(_l(e.longitude),_l(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Rl(n[i],r[i]);if(e)return e}return Ho(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Cl.mapValue&&t===Cl.mapValue)return 0;if(e===Cl.mapValue)return 1;if(t===Cl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ho(r[o],s[o]);if(0!==e)return e;const t=Rl(n[r[o]],i[s[o]]);if(0!==t)return t}return Ho(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Po()}}function Ol(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ho(e,t);const n=bl(e),r=bl(t),i=Ho(n.seconds,r.seconds);return 0!==i?i:Ho(n.nanos,r.nanos)}function Ll(e){return Ml(e)}function Ml(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Sl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ra.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ml(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ml(e.fields[i]));return n+"}"}(e.mapValue):Po()}function Fl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vl(e){return!!e&&"integerValue"in e}function zl(e){return!!e&&"arrayValue"in e}function Ul(e){return!!e&&"nullValue"in e}function Bl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jl(e){return!!e&&"mapValue"in e}function ql(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ll(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ql(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ql(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Kl(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gl(e){return"nullValue"in e?Dl:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fl(kl.empty(),ra.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Po()}function Wl(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fl(kl.empty(),ra.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Cl:Po()}function Ql(e,t){const n=Rl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Hl(e,t){const n=Rl(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Yl{constructor(e){this.value=e}static empty(){return new Yl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!jl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ql(t)}setAll(e){let t=na.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ql(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());jl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ll(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Yl(ql(this.value))}}function $l(e){const t=[];return ll(e.fields,((e,n)=>{const r=new na([e]);if(jl(n)){const e=$l(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new gl(t)}class Xl{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Xl(e,0,Jo.min(),Jo.min(),Jo.min(),Yl.empty(),0)}static newFoundDocument(e,t,n,r){return new Xl(e,1,t,Jo.min(),n,r,0)}static newNoDocument(e,t){return new Xl(e,2,t,Jo.min(),Jo.min(),Yl.empty(),0)}static newUnknownDocument(e,t){return new Xl(e,3,t,Jo.min(),Jo.min(),Yl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jo.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jo.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Jl{constructor(e,t){this.position=e,this.inclusive=t}}function Zl(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ra.comparator(ra.fromName(o.referenceValue),n.key):Rl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function eu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Al(e.position[n],t.position[n]))return!1;return!0}class tu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function nu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ru{}class iu extends ru{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new pu(e,t,n):"array-contains"===t?new vu(e,n):"in"===t?new wu(e,n):"not-in"===t?new bu(e,n):"array-contains-any"===t?new _u(e,n):new iu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new mu(e,n):new gu(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Rl(t,this.value)):null!==t&&Nl(this.value)===Nl(t)&&this.matchesComparison(Rl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Po()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class su extends ru{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new su(e,t)}matches(e){return ou(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ou(e){return"and"===e.op}function au(e){return"or"===e.op}function lu(e){return uu(e)&&ou(e)}function uu(e){for(const t of e.filters)if(t instanceof su)return!1;return!0}function cu(e){if(e instanceof iu)return e.field.canonicalString()+e.op.toString()+Ll(e.value);if(lu(e))return e.filters.map((e=>cu(e))).join(",");{const t=e.filters.map((e=>cu(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function hu(e,t){return e instanceof iu?function(e,t){return t instanceof iu&&e.op===t.op&&e.field.isEqual(t.field)&&Al(e.value,t.value)}(e,t):e instanceof su?function(e,t){return t instanceof su&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&hu(n,t.filters[r])),!0)}(e,t):void Po()}function du(e,t){const n=e.filters.concat(t);return su.create(n,e.op)}function fu(e){return e instanceof iu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ll(e.value))}(e):e instanceof su?function(e){return e.op.toString()+" {"+e.getFilters().map(fu).join(" ,")+"}"}(e):"Filter"}class pu extends iu{constructor(e,t,n){super(e,t,n),this.key=ra.fromName(n.referenceValue)}matches(e){const t=ra.comparator(e.key,this.key);return this.matchesComparison(t)}}class mu extends iu{constructor(e,t){super(e,"in",t),this.keys=yu("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gu extends iu{constructor(e,t){super(e,"not-in",t),this.keys=yu("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ra.fromName(e.referenceValue)))}class vu extends iu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zl(t)&&Pl(t.arrayValue,this.value)}}class wu extends iu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pl(this.value.arrayValue,t)}}class bu extends iu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pl(this.value.arrayValue,t)}}class _u extends iu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Pl(this.value.arrayValue,e)))}}class Su{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Eu(e){return new Su(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Iu(e){const t=Oo(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>cu(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Da(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ll(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ll(e))).join(",")),t.ce=e}return t.ce}function xu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!nu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hu(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eu(e.startAt,t.startAt)&&eu(e.endAt,t.endAt)}function Tu(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ku(e,t){return e.filters.filter((e=>e instanceof iu&&e.field.isEqual(t)))}function Cu(e,t,n){let r=Dl,i=!0;for(const s of ku(e,t)){let e=Dl,t=!0;switch(s.op){case"<":case"<=":e=Gl(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Dl}Ql({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ql({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Du(e,t,n){let r=Cl,i=!0;for(const s of ku(e,t)){let e=Cl,t=!0;switch(s.op){case">=":case">":e=Wl(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Cl}Hl({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Hl({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Nu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Au(e,t,n,r,i,s,o,a){return new Nu(e,t,n,r,i,s,o,a)}function Pu(e){return new Nu(e)}function Ru(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ou(e){return null!==e.collectionGroup}function Lu(e){const t=Oo(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fl(na.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new tu(r,n))})),e.has(na.keyField().canonicalString())||t.le.push(new tu(na.keyField(),n))}return t.le}function Mu(e){const t=Oo(e);return t.he||(t.he=Fu(t,Lu(e))),t.he}function Fu(e,t){if("F"===e.limitType)return Eu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new tu(e.field,t)}));const n=e.endAt?new Jl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Jl(e.startAt.position,e.startAt.inclusive):null;return Eu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vu(e,t){const n=e.filters.concat([t]);return new Nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zu(e,t,n){return new Nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Uu(e,t){return xu(Mu(e),Mu(t))&&e.limitType===t.limitType}function Bu(e){return"".concat(Iu(Mu(e)),"|lt:").concat(e.limitType)}function ju(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>fu(e))).join(", "),"]")),Da(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ll(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ll(e))).join(",")),"Target(".concat(t,")")}(Mu(e)),"; limitType=").concat(e.limitType,")")}function qu(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ra.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Lu(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Lu(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Lu(e),t))}(e,t)}function Ku(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gu(e){return(t,n)=>{let r=!1;for(const i of Lu(e)){const e=Wu(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Wu(e,t,n){const r=e.field.isKeyField()?ra.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Rl(r,i):Po()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Po()}}class Qu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ll(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return ul(this.inner)}size(){return this.innerSize}}const Hu=new cl(ra.comparator);function Yu(){return Hu}const $u=new cl(ra.comparator);function Xu(){let e=$u;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ju(e){let t=$u;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Zu(){return tc()}function ec(){return tc()}function tc(){return new Qu((e=>e.toString()),((e,t)=>e.isEqual(t)))}const nc=new cl(ra.comparator),rc=new fl(ra.comparator);function ic(){let e=rc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const sc=new fl(Ho);function oc(){return sc}function ac(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Na(t)?"-0":t}}function lc(e){return{integerValue:""+e}}function uc(e,t){return Aa(t)?lc(t):ac(e,t)}class cc{constructor(){this._=void 0}}function hc(e,t,n){return e instanceof pc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&El(t)&&(t=Il(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof mc?gc(e,t):e instanceof yc?vc(e,t):function(e,t){const n=fc(e,t),r=bc(n)+bc(e.Ie);return Vl(n)&&Vl(e.Ie)?lc(r):ac(e.serializer,r)}(e,t)}function dc(e,t,n){return e instanceof mc?gc(e,t):e instanceof yc?vc(e,t):n}function fc(e,t){return e instanceof wc?function(e){return Vl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class pc extends cc{}class mc extends cc{constructor(e){super(),this.elements=e}}function gc(e,t){const n=_c(t);for(const r of e.elements)n.some((e=>Al(e,r)))||n.push(r);return{arrayValue:{values:n}}}class yc extends cc{constructor(e){super(),this.elements=e}}function vc(e,t){let n=_c(t);for(const r of e.elements)n=n.filter((e=>!Al(e,r)));return{arrayValue:{values:n}}}class wc extends cc{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function bc(e){return _l(e.integerValue||e.doubleValue)}function _c(e){return zl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sc{constructor(e,t){this.field=e,this.transform=t}}class Ec{constructor(e,t){this.version=e,this.transformResults=t}}class Ic{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ic}static exists(e){return new Ic(void 0,e)}static updateTime(e){return new Ic(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tc{}function kc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fc(e.key,Ic.none()):new Pc(e.key,e.data,Ic.none());{const n=e.data,r=Yl.empty();let i=new fl(na.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Rc(e.key,r,new gl(i.toArray()),Ic.none())}}function Cc(e,t,n){e instanceof Pc?function(e,t,n){const r=e.value.clone(),i=Lc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Rc?function(e,t,n){if(!xc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Oc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Dc(e,t,n,r){return e instanceof Pc?function(e,t,n,r){if(!xc(e.precondition,t))return n;const i=e.value.clone(),s=Mc(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Rc?function(e,t,n,r){if(!xc(e.precondition,t))return n;const i=Mc(e.fieldTransforms,r,t),s=t.data;return s.setAll(Oc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return xc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=fc(r.transform,e||null);null!=i&&(null===n&&(n=Yl.empty()),n.set(r.field,i))}return n||null}function Ac(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Yo(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof mc&&t instanceof mc||e instanceof yc&&t instanceof yc?Yo(e.elements,t.elements,Al):e instanceof wc&&t instanceof wc?Al(e.Ie,t.Ie):e instanceof pc&&t instanceof pc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Pc extends Tc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rc extends Tc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Oc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Lc(e,t,n){const r=new Map;Ro(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dc(o,a,n[i]))}return r}function Mc(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,hc(e,s,t))}return r}class Fc extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vc extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Cc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ec();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=kc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Jo.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ic())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((e,t)=>Ac(e,t)))&&Yo(this.baseMutations,e.baseMutations,((e,t)=>Ac(e,t)))}}class Uc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ro(e.mutations.length===n.length);let r=nc;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Uc(e,t,n,r)}}class Bc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class jc{constructor(e,t){this.count=e,this.unchangedNames=t}}var qc,Kc;function Gc(e){switch(e){default:return Po();case Lo.CANCELLED:case Lo.UNKNOWN:case Lo.DEADLINE_EXCEEDED:case Lo.RESOURCE_EXHAUSTED:case Lo.INTERNAL:case Lo.UNAVAILABLE:case Lo.UNAUTHENTICATED:return!1;case Lo.INVALID_ARGUMENT:case Lo.NOT_FOUND:case Lo.ALREADY_EXISTS:case Lo.PERMISSION_DENIED:case Lo.FAILED_PRECONDITION:case Lo.ABORTED:case Lo.OUT_OF_RANGE:case Lo.UNIMPLEMENTED:case Lo.DATA_LOSS:return!0}}function Wc(e){if(void 0===e)return Do("GRPC error has no .code"),Lo.UNKNOWN;switch(e){case qc.OK:return Lo.OK;case qc.CANCELLED:return Lo.CANCELLED;case qc.UNKNOWN:return Lo.UNKNOWN;case qc.DEADLINE_EXCEEDED:return Lo.DEADLINE_EXCEEDED;case qc.RESOURCE_EXHAUSTED:return Lo.RESOURCE_EXHAUSTED;case qc.INTERNAL:return Lo.INTERNAL;case qc.UNAVAILABLE:return Lo.UNAVAILABLE;case qc.UNAUTHENTICATED:return Lo.UNAUTHENTICATED;case qc.INVALID_ARGUMENT:return Lo.INVALID_ARGUMENT;case qc.NOT_FOUND:return Lo.NOT_FOUND;case qc.ALREADY_EXISTS:return Lo.ALREADY_EXISTS;case qc.PERMISSION_DENIED:return Lo.PERMISSION_DENIED;case qc.FAILED_PRECONDITION:return Lo.FAILED_PRECONDITION;case qc.ABORTED:return Lo.ABORTED;case qc.OUT_OF_RANGE:return Lo.OUT_OF_RANGE;case qc.UNIMPLEMENTED:return Lo.UNIMPLEMENTED;case qc.DATA_LOSS:return Lo.DATA_LOSS;default:return Po()}}(Kc=qc||(qc={}))[Kc.OK=0]="OK",Kc[Kc.CANCELLED=1]="CANCELLED",Kc[Kc.UNKNOWN=2]="UNKNOWN",Kc[Kc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kc[Kc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kc[Kc.NOT_FOUND=5]="NOT_FOUND",Kc[Kc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kc[Kc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kc[Kc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kc[Kc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kc[Kc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kc[Kc.ABORTED=10]="ABORTED",Kc[Kc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kc[Kc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kc[Kc.INTERNAL=13]="INTERNAL",Kc[Kc.UNAVAILABLE=14]="UNAVAILABLE",Kc[Kc.DATA_LOSS=15]="DATA_LOSS";let Qc=null;function Hc(){return new TextEncoder}const Yc=new So([4294967295,4294967295],0);function $c(e){const t=Hc().encode(e),n=new _o;return n.update(t),new Uint8Array(n.digest())}function Xc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new So([n,r],0),new So([i,s],0)]}class Jc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Zc("Invalid padding: ".concat(t));if(n<0)throw new Zc("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Zc("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Zc("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=So.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(So.fromNumber(n)));return 1===r.compare(Yc)&&(r=new So([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=$c(e),[n,r]=Xc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Jc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=$c(e),[n,r]=Xc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class eh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new eh(Jo.min(),r,new cl(Ho),Yu(),ic())}}class th{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new th(n,t,ic(),ic(),ic())}}class nh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class rh{constructor(e,t){this.targetId=e,this.fe=t}}class ih{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class sh{constructor(){this.ge=0,this.pe=lh(),this.ye=vl.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ic(),t=ic(),n=ic();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Po()}})),new th(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=lh()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ro(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class oh{constructor(e){this.Le=e,this.ke=new Map,this.qe=Yu(),this.Qe=ah(),this.Ke=new cl(Ho)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Po()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Tu(i))if(0===n){const e=new ra(i.path);this.We(t,e,Xl.newNoDocument(e,Jo.min()))}else Ro(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Qc||Qc.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Sl(n).toUint8Array()}catch(e){if(e instanceof yl)return No("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Jc(s,r,i)}catch(e){return No(e instanceof Zc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Tu(i.target)){const t=new ra(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Xl.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=ic();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new eh(e,t,this.Ke,this.qe,n);return this.qe=Yu(),this.Qe=ah(),this.Ke=new cl(Ho),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new sh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new fl(Ho),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Co("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new sh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ah(){return new cl(ra.comparator)}function lh(){return new cl(ra.comparator)}const uh={asc:"ASCENDING",desc:"DESCENDING"},ch={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hh={and:"AND",or:"OR"};class dh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fh(e,t){return e.useProto3Json||Da(t)?t:{value:t}}function ph(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gh(e,t){return ph(e,t.toTimestamp())}function yh(e){return Ro(!!e),Jo.fromTimestamp(function(e){const t=bl(e);return new Xo(t.seconds,t.nanos)}(e))}function vh(e,t){return function(e){return new ea(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function wh(e){const t=ea.fromString(e);return Ro(Bh(t)),t}function bh(e,t){return vh(e.databaseId,t.path)}function _h(e,t){const n=wh(t);if(n.get(1)!==e.databaseId.projectId)throw new Mo(Lo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Mo(Lo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ra(xh(n))}function Sh(e,t){return vh(e.databaseId,t)}function Eh(e){const t=wh(e);return 4===t.length?ea.emptyPath():xh(t)}function Ih(e){return new ea(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xh(e){return Ro(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Th(e,t,n){return{name:bh(e,t),fields:n.value.mapValue.fields}}function kh(e,t,n){const r=_h(e,t.name),i=yh(t.updateTime),s=t.createTime?yh(t.createTime):Jo.min(),o=new Yl({mapValue:{fields:t.fields}}),a=Xl.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ch(e,t){let n;if(t instanceof Pc)n={update:Th(e,t.key,t.value)};else if(t instanceof Fc)n={delete:bh(e,t.key)};else if(t instanceof Rc)n={update:Th(e,t.key,t.data),updateMask:Uh(t.fieldMask)};else{if(!(t instanceof Vc))return Po();n={verify:bh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof pc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof mc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Po()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Po()}(e,t.precondition)),n}function Dh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ic.updateTime(yh(e.updateTime)):void 0!==e.exists?Ic.exists(e.exists):Ic.none()}(t.currentDocument):Ic.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Ro("REQUEST_TIME"===t.setToServerValue),n=new pc;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new mc(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yc(e)}else"increment"in t?n=new wc(e,t.increment):Po();const r=na.fromServerFormat(t.fieldPath);return new Sc(r,n)}(e,t))):[];if(t.update){t.update.name;const i=_h(e,t.update.name),s=new Yl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new gl(t.map((e=>na.fromServerFormat(e))))}(t.updateMask);return new Rc(i,s,e,n,r)}return new Pc(i,s,n,r)}if(t.delete){const r=_h(e,t.delete);return new Fc(r,n)}if(t.verify){const r=_h(e,t.verify);return new Vc(r,n)}return Po()}function Nh(e,t){return{documents:[Sh(e,t.path)]}}function Ah(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Sh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Sh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return zh(su.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Fh(e.field),direction:Oh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=fh(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ph(e){let t=Eh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ro(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Rh(e);return t instanceof su&&lu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new tu(Vh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Da(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Jl(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Jl(n,t)}(n.endAt)),Au(t,i,o,s,a,"F",l,u)}function Rh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vh(e.unaryFilter.field);return iu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vh(e.unaryFilter.field);return iu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vh(e.unaryFilter.field);return iu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vh(e.unaryFilter.field);return iu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Po()}}(e):void 0!==e.fieldFilter?function(e){return iu.create(Vh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Po()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return su.create(e.compositeFilter.filters.map((e=>Rh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Po()}}(e.compositeFilter.op))}(e):Po()}function Oh(e){return uh[e]}function Lh(e){return ch[e]}function Mh(e){return hh[e]}function Fh(e){return{fieldPath:e.canonicalString()}}function Vh(e){return na.fromServerFormat(e.fieldPath)}function zh(e){return e instanceof iu?function(e){if("=="===e.op){if(Bl(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Bl(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NOT_NAN"}};if(Ul(e.value))return{unaryFilter:{field:Fh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fh(e.field),op:Lh(e.op),value:e.value}}}(e):e instanceof su?function(e){const t=e.getFilters().map((e=>zh(e)));return 1===t.length?t[0]:{compositeFilter:{op:Mh(e.op),filters:t}}}(e):Po()}function Uh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Bh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class jh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jo.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jo.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vl.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new jh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class qh{constructor(e){this.ut=e}}function Kh(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Gh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:bh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ph(e,t.version.toTimestamp()),createTime:ph(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wh(t.version)};else{if(!t.isUnknownDocument())return Po();r.unknownDocument={path:n.path.toArray(),version:Wh(t.version)}}return r}function Gh(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wh(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qh(e){const t=new Xo(e.seconds,e.nanoseconds);return Jo.fromTimestamp(t)}function Hh(e,t){const n=(t.baseMutations||[]).map((t=>Dh(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Dh(e.ut,t))),i=Xo.fromMillis(t.localWriteTimeMs);return new zc(t.batchId,i,n,r)}function Yh(e){const t=Qh(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Qh(e.lastLimboFreeSnapshotVersion):Jo.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Ro(1===e.documents.length),Mu(Pu(Eh(e.documents[0])))}(e.query):function(e){return Mu(Ph(e))}(e.query),new jh(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,vl.fromBase64String(e.resumeToken))}function $h(e,t){const n=Wh(t.snapshotVersion),r=Wh(t.lastLimboFreeSnapshotVersion);let i;i=Tu(t.target)?Nh(e.ut,t.target):Ah(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Iu(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Xh(e){const t=Ph({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zu(t,t.limit,"L"):t}function Jh(e,t){return new Bc(t.largestBatchId,Dh(e.ut,t.overlayMutation))}function Zh(e,t){const n=t.path.lastSegment();return[e,Pa(t.path.popLast()),n]}function ed(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Wh(r.readTime),documentKey:Pa(r.documentKey.path),largestBatchId:r.largestBatchId}}class td{getBundleMetadata(e,t){return nd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Qh(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return nd(e).put(function(e){return{bundleId:e.id,createTime:Wh(yh(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return rd(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Xh(e.bundledQuery),readTime:Qh(e.readTime)}}(e)}))}saveNamedQuery(e,t){return rd(e).put(function(e){return{name:e.name,readTime:Wh(yh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function nd(e){return ol(e,"bundles")}function rd(e){return ol(e,"namedQueries")}class id{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new id(e,n)}getOverlay(e,t){return sd(e).get(Zh(this.userId,t)).next((e=>e?Jh(this.serializer,e):null))}getOverlays(e,t){const n=Zu();return ga.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Bc(t,i);r.push(this.lt(e,s))})),ga.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Pa(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(sd(e).H("collectionPathOverlayIndex",r))})),ga.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Zu(),i=Pa(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return sd(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Jh(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Zu();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sd(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Jh(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return sd(e).put(function(e,t,n){const[r,i,s]=Zh(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ch(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function sd(e){return ol(e,"documentOverlays")}class od{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(_l(e.integerValue));else if("doubleValue"in e){const n=_l(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Na(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Sl(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Kl(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Po()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ra.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function ad(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ld(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=ad(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}od.St=new od;class ud{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=ld(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=ld(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class cd{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class hd{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class dd{constructor(){this.Wt=new ud,this.Gt=new cd(this.Wt),this.zt=new hd(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class fd{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new fd(this.indexId,this.documentKey,this.arrayValue,n)}}function pd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=md(e.arrayValue,t.arrayValue),0!==n?n:(n=md(e.directionalValue,t.directionalValue),0!==n?n:ra.comparator(e.documentKey,t.documentKey)))}function md(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class gd{constructor(e){this.Jt=new fl(((e,t)=>na.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Ro(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=sa(e);if(void 0!==t&&!this.tn(t))return!1;const n=oa(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new fl(na.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new aa(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new aa(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new aa(n.field,"asc"===n.dir?0:1)));return new ia(ia.UNKNOWN_ID,this.collectionId,t,la.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yd(e){var t,n;if(Ro(e instanceof iu||e instanceof su),e instanceof iu){if(e instanceof wu){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>iu.create(e.field,"==",t))))||[];return su.create(r,"or")}return e}const r=e.filters.map((e=>yd(e)));return su.create(r,e.op)}function vd(e){if(0===e.getFilters().length)return[];const t=Sd(yd(e));return Ro(_d(t)),wd(t)||bd(t)?[t]:t.getFilters()}function wd(e){return e instanceof iu}function bd(e){return e instanceof su&&lu(e)}function _d(e){return wd(e)||bd(e)||function(e){if(e instanceof su&&au(e)){for(const t of e.getFilters())if(!wd(t)&&!bd(t))return!1;return!0}return!1}(e)}function Sd(e){if(Ro(e instanceof iu||e instanceof su),e instanceof iu)return e;if(1===e.filters.length)return Sd(e.filters[0]);const t=e.filters.map((e=>Sd(e)));let n=su.create(t,e.op);return n=xd(n),_d(n)?n:(Ro(n instanceof su),Ro(ou(n)),Ro(n.filters.length>1),n.filters.reduce(((e,t)=>Ed(e,t))))}function Ed(e,t){let n;return Ro(e instanceof iu||e instanceof su),Ro(t instanceof iu||t instanceof su),n=e instanceof iu?t instanceof iu?function(e,t){return su.create([e,t],"and")}(e,t):Id(e,t):t instanceof iu?Id(t,e):function(e,t){if(Ro(e.filters.length>0&&t.filters.length>0),ou(e)&&ou(t))return du(e,t.getFilters());const n=au(e)?e:t,r=au(e)?t:e,i=n.filters.map((e=>Ed(e,r)));return su.create(i,"or")}(e,t),xd(n)}function Id(e,t){if(ou(t))return du(t,e.getFilters());{const n=t.filters.map((t=>Ed(e,t)));return su.create(n,"or")}}function xd(e){if(Ro(e instanceof iu||e instanceof su),e instanceof iu)return e;const t=e.getFilters();if(1===t.length)return xd(t[0]);if(uu(e))return e;const n=t.map((e=>xd(e))),r=[];return n.forEach((t=>{t instanceof iu?r.push(t):t instanceof su&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:su.create(r,e.op)}class Td{constructor(){this.on=new kd}addToCollectionParentIndex(e,t){return this.on.add(t),ga.resolve()}getCollectionParents(e,t){return ga.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return ga.resolve()}deleteFieldIndex(e,t){return ga.resolve()}deleteAllFieldIndexes(e){return ga.resolve()}createTargetIndexes(e,t){return ga.resolve()}getDocumentsMatchingTarget(e,t){return ga.resolve(null)}getIndexType(e,t){return ga.resolve(0)}getFieldIndexes(e,t){return ga.resolve([])}getNextCollectionGroupToUpdate(e){return ga.resolve(null)}getMinOffset(e,t){return ga.resolve(ha.min())}getMinOffsetFromCollectionGroup(e,t){return ga.resolve(ha.min())}updateCollectionGroup(e,t,n){return ga.resolve()}updateIndexEntries(e,t){return ga.resolve()}}class kd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fl(ea.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fl(ea.comparator)).toArray()}}const Cd=new Uint8Array(0);class Dd{constructor(e,t){this.user=e,this.databaseId=t,this._n=new kd,this.an=new Qu((e=>Iu(e)),((e,t)=>xu(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Pa(r)};return Nd(e).put(i)}return ga.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[$o(t),""],!1,!0);return Nd(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(La(r.parent))}return n}))}addFieldIndex(e,t){const n=Pd(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Rd(e);return i.next((e=>{n.put(ed(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Pd(e),r=Rd(e),i=Ad(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Pd(e),n=Ad(e),r=Rd(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return ga.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new gd(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Ad(e);let r=!0;const i=new Map;return ga.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ic();const r=[];return ga.forEach(i,((i,s)=>{Co("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Iu(t)));const o=function(e,t){const n=sa(t);if(void 0===n)return null;for(const r of ku(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of oa(t))for(const t of ku(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of oa(t)){const t=0===i.kind?Cu(e,i.fieldPath,e.startAt):Du(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Jl(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of oa(t)){const t=0===i.kind?Du(e,i.fieldPath,e.endAt):Cu(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Jl(n,r)}(s,i),c=this.ln(i,s,l),h=this.ln(i,s,u),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return ga.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=ra.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return ga.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:vd(su.create(e.filters,"and")).map((t=>Eu(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.In(t[c/l]):Cd,h=this.Tn(e,a,n[c%l],r),d=this.En(e,a,i[c%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}Tn(e,t,n,r){const i=new fd(e,ra.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new fd(e,ra.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new gd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return ga.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new fl(na.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new dd;for(const r of oa(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);od.St.ht(e,i)}return n.Ut()}In(e){const t=new dd;return od.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new dd;return od.St.ht(Fl(this.databaseId,t),n.jt(function(e){const t=oa(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new dd);let i=0;for(const s of oa(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&zl(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);od.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new dd;n.seed(e.Ut()),od.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof iu&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Pd(e),r=Rd(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return ga.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new la(t.sequenceNumber,new ha(Qh(t.readTime),new ra(La(t.documentKey)),t.largestBatchId)):la.empty(),r=e.fields.map((e=>{let[t,n]=e;return new aa(na.fromServerFormat(t),n)}));return new ia(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ho(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Pd(e),i=Rd(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>ga.forEach(t,(t=>i.put(ed(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return ga.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?ga.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),ga.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?ga.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return Ad(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return Ad(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=Ad(e);let i=new fl(pd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new fd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new fl(pd);const r=this.dn(t,e);if(null==r)return n;const i=sa(t);if(null!=i){const s=e.data.field(i.fieldPath);if(zl(s))for(const i of s.arrayValue.values||[])n=n.add(new fd(t.indexId,e.key,this.In(i),r))}else n=n.add(new fd(t.indexId,e.key,Cd,r));return n}yn(e,t,n,r,i){Co("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=ml(s),l=ml(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=ml(o)):t?(i(a),a=ml(s)):(a=ml(s),l=ml(o))}}(r,i,pd,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),ga.waitFor(s)}fn(e){let t=1;return Rd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>pd(e,t))).filter(((e,t,n)=>!t||0!==pd(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=pd(s,e),i=pd(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Cd,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Cd,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return pd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Od)}getMinOffset(e,t){return ga.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Po())))).next(Od)}}function Nd(e){return ol(e,"collectionParents")}function Ad(e){return ol(e,"indexEntries")}function Pd(e){return ol(e,"indexConfiguration")}function Rd(e){return ol(e,"indexState")}function Od(e){Ro(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;da(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ha(t.readTime,t.documentKey,n)}const Ld={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Md{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Md(e,Md.DEFAULT_COLLECTION_PERCENTILE,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Fd(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Ro(1===a)})));const u=[];for(const c of n.mutations){const e=Va(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return ga.waitFor(s).next((()=>u))}function Vd(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Po();t=e.noDocument}return JSON.stringify(t).length}Md.DEFAULT_COLLECTION_PERCENTILE=10,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Md.DEFAULT=new Md(41943040,Md.DEFAULT_COLLECTION_PERCENTILE,Md.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Md.DISABLED=new Md(-1,0,0);class zd{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Ro(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new zd(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bd(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=jd(e),s=Bd(e);return s.add({}).next((o=>{Ro("number"==typeof o);const a=new zc(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ch(e.ut,t))),i=n.mutations.map((t=>Ch(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new fl(((e,t)=>Ho(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Va(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,za))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),ga.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Bd(e).get(t).next((e=>e?(Ro(e.userId===this.userId),Hh(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?ga.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Bd(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Ro(t.batchId>=n),i=Hh(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Bd(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bd(e).W("userMutationsIndex",t).next((e=>e.map((e=>Hh(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Fa(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return jd(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=La(a);if(o===this.userId&&t.path.isEqual(u))return Bd(e).get(l).next((e=>{if(!e)throw Po();Ro(e.userId===this.userId),i.push(Hh(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fl(Ho);const r=[];return t.forEach((t=>{const i=Fa(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=jd(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=La(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),ga.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Fa(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new fl(Ho);return jd(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=La(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Bd(e).get(t).next((e=>{if(null===e)throw Po();Ro(e.userId===this.userId),n.push(Hh(this.serializer,e))})))})),ga.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Fd(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),ga.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ga.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return jd(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=La(e[1]);r.push(t)}else n.done()})).next((()=>{Ro(0===r.length)}))}))}containsKey(e,t){return Ud(e,this.userId,t)}Mn(e){return qd(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ud(e,t,n){const r=Fa(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return jd(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function Bd(e){return ol(e,"mutations")}function jd(e){return ol(e,"documentMutations")}function qd(e){return ol(e,"mutationQueues")}class Kd{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Kd(0)}static Nn(){return new Kd(-1)}}class Gd{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Kd(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Jo.fromTimestamp(new Xo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wd(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Ro(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Wd(e).Y(((s,o)=>{const a=Yh(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>ga.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Wd(e).Y(((e,n)=>{const r=Yh(n);t(r)}))}Bn(e){return Qd(e).get("targetGlobalKey").next((e=>(Ro(null!==e),e)))}Ln(e,t){return Qd(e).put("targetGlobalKey",t)}kn(e,t){return Wd(e).put($h(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Iu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wd(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Yh(n);xu(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Hd(e);return t.forEach((t=>{const s=Pa(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),ga.waitFor(r)}removeMatchingKeys(e,t,n){const r=Hd(e);return ga.forEach(t,(t=>{const i=Pa(t.path);return ga.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Hd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Hd(e);let i=ic();return r.Y({range:n,J:!0},((e,t,n)=>{const r=La(e[1]),s=new ra(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Pa(t.path),r=IDBKeyRange.bound([n],[$o(n)],!1,!0);let i=0;return Hd(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Wd(e).get(t).next((e=>e?Yh(e):null))}}function Wd(e){return ol(e,"targets")}function Qd(e){return ol(e,"targetGlobal")}function Hd(e){return ol(e,"targetDocuments")}function Yd(e,t){let[n,r]=e,[i,s]=t;const o=Ho(n,i);return 0===o?Ho(r,s):o}class $d{constructor(e){this.Qn=e,this.buffer=new fl(Yd),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yd(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Co("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_a(e)?Co("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ma(e)}await this.Gn(3e5)}))}}class Jd{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return ga.resolve(Ca._e);const n=new $d(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Co("LruGarbageCollector","Garbage collection skipped; disabled"),ga.resolve(Ld)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Co("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ld):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Co("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ko()<=We.DEBUG&&Co("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),ga.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Zd(e,t){return new Jd(e,t)}class ef{constructor(e,t){this.db=e,this.garbageCollector=Zd(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return tf(e,n)}removeReference(e,t,n){return tf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return tf(e,t)}Xn(e,t){return function(e,t){let n=!1;return qd(e).Z((r=>Ud(e,r,t).next((e=>(e&&(n=!0),ga.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Jo.min()),Hd(e).delete(function(e){return[0,Pa(e.path)]}(s)))))}));r.push(t)}})).next((()=>ga.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return tf(e,t)}Zn(e,t){const n=Hd(e);let r,i=Ca._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ca._e&&t(new ra(La(r)),i),i=l,r=a):i=Ca._e})).next((()=>{i!==Ca._e&&t(new ra(La(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tf(e,t){return Hd(e).put(function(e,t){return{targetId:0,path:Pa(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class nf{constructor(){this.changes=new Qu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ga.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rf{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lf(e).put(n)}removeEntry(e,t,n){return lf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Gh(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Xl.newInvalidDocument(t);return lf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Xl.newInvalidDocument(t)};return lf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uf(t))},((e,r)=>{n={document:this.tr(t,r),size:Vd(r)}})).next((()=>n))}getEntries(e,t){let n=Yu();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Yu(),r=new cl(ra.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,Vd(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return ga.resolve();let r=new fl(hf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(uf(r.first()),uf(r.last())),s=r.getIterator();let o=s.getNext();return lf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ra.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&hf(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(uf(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Gh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lf(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Yu();for(const i of e){const e=this.tr(ra.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(qu(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Yu();const s=cf(t,n),o=cf(t,ha.max());return lf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(ra.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new of(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return af(e).get("remoteDocumentGlobalKey").next((e=>(Ro(!!e),e)))}er(e,t){return af(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=kh(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ra.fromSegments(t.noDocument.path),r=Qh(t.noDocument.readTime);n=Xl.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Po();{const e=ra.fromSegments(t.unknownDocument.path),r=Qh(t.unknownDocument.version);n=Xl.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Xo(e[0],e[1]);return Jo.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Jo.min()))return e}return Xl.newInvalidDocument(e)}}function sf(e){return new rf(e)}class of extends nf{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Qu((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new fl(((e,t)=>Ho(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Kh(this._r.serializer,s);r=r.add(i.path.popLast());const l=Vd(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Kh(this._r.serializer,s.convertToNoDocument(Jo.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),ga.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function af(e){return ol(e,"remoteDocumentGlobal")}function lf(e){return ol(e,"remoteDocumentsV14")}function uf(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cf(e,t){const n=t.documentKey.path.toArray();return[e,Gh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ho(n[s],r[s]),i)return i;return i=Ho(n.length,r.length),i||(i=Ho(n[n.length-2],r[r.length-2]),i||Ho(n[n.length-1],r[r.length-1]))}class df{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ff{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Dc(n.mutation,e,gl.empty(),Xo.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ic()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ic();const r=Zu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Xu();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Zu();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ic())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Yu();const s=tc(),o=tc();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Rc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Dc(o.mutation,t,o.mutation.getFieldMask(),Xo.now())):s.set(t.key,gl.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new df(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=tc();let r=new cl(((e,t)=>e-t)),i=ic();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||gl.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ic()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=ec();l.forEach((e=>{if(!i.has(e)){const r=kc(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return ga.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ou(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):ga.resolve(Zu());let o=-1,a=i;return s.next((t=>ga.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?ga.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ic()))).next((e=>({batchId:o,changes:Ju(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ra(t)).next((e=>{let t=Xu();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Xu();return this.indexManager.getCollectionParents(e,i).next((o=>ga.forEach(o,(o=>{const a=function(e,t){return new Nu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xl.newInvalidDocument(r)))}));let n=Xu();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Dc(s.mutation,r,gl.empty(),Xo.now()),qu(t,r)&&(n=n.insert(e,r))})),n}))}}class pf{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return ga.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yh(e.createTime)}}(t)),ga.resolve()}getNamedQuery(e,t){return ga.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Xh(e.bundledQuery),readTime:yh(e.readTime)}}(t)),ga.resolve()}}class mf{constructor(){this.overlays=new cl(ra.comparator),this.lr=new Map}getOverlay(e,t){return ga.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Zu();return ga.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),ga.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),ga.resolve()}getOverlaysForCollection(e,t,n){const r=Zu(),i=t.length+1,s=new ra(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ga.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new cl(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Zu(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Zu(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return ga.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Bc(t,n));let i=this.lr.get(t);void 0===i&&(i=ic(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class gf{constructor(){this.hr=new fl(yf.Pr),this.Ir=new fl(yf.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new yf(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new yf(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new ra(new ea([])),n=new yf(t,e),r=new yf(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ra(new ea([])),n=new yf(t,e),r=new yf(t,e+1);let i=ic();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new yf(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yf{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ra.comparator(e.key,t.key)||Ho(e.gr,t.gr)}static Tr(e,t){return Ho(e.gr,t.gr)||ra.comparator(e.key,t.key)}}class vf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new fl(yf.Pr)}checkEmpty(e){return ga.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new yf(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ga.resolve(s)}lookupMutationBatch(e,t){return ga.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return ga.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return ga.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return ga.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yf(t,0),r=new yf(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),ga.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fl(Ho);return t.forEach((e=>{const t=new yf(e,0),r=new yf(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),ga.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ra.isDocumentKey(i)||(i=i.child(""));const s=new yf(new ra(i),0);let o=new fl(Ho);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),ga.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ro(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return ga.forEach(t.mutations,(r=>{const i=new yf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new yf(t,0),r=this.yr.firstAfterOrEqual(n);return ga.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ga.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wf{constructor(e){this.Cr=e,this.docs=new cl(ra.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ga.resolve(n?n.document.mutableCopy():Xl.newInvalidDocument(t))}getEntries(e,t){let n=Yu();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xl.newInvalidDocument(e))})),ga.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Yu();const s=t.path,o=new ra(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||da(ca(o),n)<=0||(r.has(o.key)||qu(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return ga.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Po()}vr(e,t){return ga.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bf(this)}getSize(e){return ga.resolve(this.size)}}class bf extends nf{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),ga.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class _f{constructor(e){this.persistence=e,this.Fr=new Qu((e=>Iu(e)),xu),this.lastRemoteSnapshotVersion=Jo.min(),this.highestTargetId=0,this.Mr=0,this.Or=new gf,this.targetCount=0,this.Nr=Kd.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),ga.resolve()}getLastRemoteSnapshotVersion(e){return ga.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ga.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),ga.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),ga.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new Kd(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,ga.resolve()}updateTargetData(e,t){return this.kn(t),ga.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,ga.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),ga.waitFor(i).next((()=>r))}getTargetCount(e){return ga.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return ga.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),ga.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),ga.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),ga.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return ga.resolve(n)}containsKey(e,t){return ga.resolve(this.Or.containsKey(t))}}class Sf{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ca(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new _f(this),this.indexManager=new Td,this.remoteDocumentCache=function(e){return new wf(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new qh(t),this.Kr=new pf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new vf(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Co("MemoryPersistence","Starting transaction:",e);const r=new Ef(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return ga.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Ef extends pa{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Gr=new gf,this.zr=null}static jr(e){return new If(e)}get Hr(){if(this.zr)return this.zr;throw Po()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),ga.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),ga.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),ga.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ga.forEach(this.Hr,(n=>{const r=ra.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Jo.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return ga.or([()=>ga.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class xf{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ya("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ma,{unique:!0}),e.createObjectStore("documentMutations")}(e),Tf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=ga.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Tf(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jo.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ma,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return ga.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Xa});t.createIndex("collectionPathOverlayIndex",Ja,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Za,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ua});t.createIndex("documentKeyIndex",Ba),t.createIndex("collectionGroupIndex",ja)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qa}).createIndex("sequenceNumberIndex",Ha,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Ya}).createIndex("documentKeyIndex",$a,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Vd(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>ga.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>ga.forEach(n,(n=>{Ro(n.userId===t.userId);const r=Hh(this.serializer,n);return Fd(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ea(n),o=function(e){return[0,Pa(e)]}(s);r.push(t.get(o).next((n=>n?ga.resolve():(n=>t.put({targetId:0,path:Pa(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>ga.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Wa});const n=t.store("collectionParents"),r=new kd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Pa(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ea(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=La(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Yh(n),i=$h(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ra(ea.fromString(e.document.name).popFirst(5)):e.noDocument?ra.fromSegments(e.noDocument.path):e.unknownDocument?ra.fromSegments(e.unknownDocument.path):Po()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>ga.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=sf(this.serializer),i=new Sf(If.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ic();Hh(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),ga.forEach(n,((e,n)=>{const s=new Io(n),o=id.ct(this.serializer,s),a=i.getIndexManager(s),l=zd.ct(s,this.serializer,a,i.referenceDelegate);return new ff(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new sl(t,Ca._e),e).next()}))}))}}function Tf(e){e.createObjectStore("targetDocuments",{keyPath:Ka}).createIndex("documentTargetsIndex",Ga,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qa,{unique:!0}),e.createObjectStore("targetGlobal")}const kf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cf{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=u,this.ai=c,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!Cf.D())throw new Mo(Lo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ef(this,r),this.Ii=t+"main",this.serializer=new qh(a),this.Ti=new va(this.Ii,this.ai,new xf(this.serializer)),this.qr=new Gd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sf(this.serializer),this.Kr=new td,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===u&&Do("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mo(Lo.FAILED_PRECONDITION,kf);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Ca(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Nf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(_a(e))return Co("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Co("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return Df(e).get("owner").next((e=>ga.resolve(this.wi(e))))}Si(e){return Nf(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=ol(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return ga.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?ga.resolve(!0):Df(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Mo(Lo.FAILED_PRECONDITION,kf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nf(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Co("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new sl(e,Ca._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Nf(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return zd.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dd(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return id.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Co("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?il:14===e?rl:13===e?nl:12===e?tl:11===e?el:void Po()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new sl(r,this.Lr?this.Lr.next():Ca._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Do("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Mo(Lo.FAILED_PRECONDITION,fa);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return Df(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Mo(Lo.FAILED_PRECONDITION,kf)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Df(e).put("owner",t)}static D(){return va.D()}pi(e){const t=Df(e);return t.get("owner").next((e=>this.wi(e)?(Co("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ga.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Do("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;De()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Co("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Do("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){Do("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Df(e){return ol(e,"owner")}function Nf(e){return ol(e,"clientMetadata")}function Af(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Pf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=ic(),r=ic();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Pf(e,t.fromCache,n,r)}}class Rf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Of{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Rf;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(ko()<=We.DEBUG&&Co("QueryEngine","SDK will not create cache indexes for query:",ju(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),ga.resolve()):(ko()<=We.DEBUG&&Co("QueryEngine","Query:",ju(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(ko()<=We.DEBUG&&Co("QueryEngine","The SDK decides to create cache indexes for query:",ju(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mu(t))):ga.resolve())}zi(e,t){if(Ru(t))return ga.resolve(null);let n=Mu(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=zu(t,null,"F"),n=Mu(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ic(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,zu(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ru(t)||r.isEqual(Jo.min())?ga.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?ga.resolve(null):(ko()<=We.DEBUG&&Co("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ju(t)),this.Xi(e,s,t,ua(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new fl(Gu(e));return t.forEach(((t,r)=>{qu(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return ko()<=We.DEBUG&&Co("QueryEngine","Using full collection scan to execute query:",ju(t)),this.Gi.getDocumentsMatchingQuery(e,t,ha.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Lf{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new cl(Ho),this.ns=new Qu((e=>Iu(e)),xu),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ff(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Mf(e,t,n,r){return new Lf(e,t,n,r)}async function Ff(e,t){const n=Oo(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ic();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Vf(e){const t=Oo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function zf(e,t,n){let r=ic(),i=ic();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Yu();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Jo.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Co("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function Uf(e,t){const n=Oo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Bf(e,t){const n=Oo(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,ga.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new jh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function jf(e,t,n){const r=Oo(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!_a(e))throw e;Co("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function qf(e,t,n){const r=Oo(e);let i=Jo.min(),s=ic();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Oo(e),i=r.ns.get(n);return void 0!==i?ga.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Mu(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Jo.min(),n?s:ic()))).next((e=>(Wf(r,Ku(t),e),{documents:e,ls:s})))))}function Kf(e,t){const n=Oo(e),r=Oo(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Gf(e,t){const n=Oo(e),r=n.rs.get(t)||Jo.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,ua(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Wf(n,t,e),e)))}function Wf(e,t,n){let r=e.rs.get(t)||Jo.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function Qf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ic();const r=await Bf(e,Mu(Xh(t.bundledQuery))),i=Oo(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=yh(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(vl.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function Hf(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Yf(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function $f(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Xf{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Mo(r.error.code,r.error.message))),s?new Xf(e,t,r.state,i):(Do("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Mo(n.error.code,n.error.message))),i?new Jf(e,n.state,r):(Do("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=oc();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Aa(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Zf(e,i):(Do("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ep{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ep(t.clientId,t.onlineState):(Do("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class tp{constructor(){this.activeTargetIds=oc()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class np{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new cl(Ho),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=Hf(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new tp),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(Hf(this.persistenceKey,n));if(e){const t=Zf.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem($f(this.persistenceKey,e));if(n){const r=Jf.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($f(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Co("SharedClientState","READ",e,t),t}setItem(e,t){Co("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Co("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Co("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Do("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Ca._e;if(null!=e)try{const n=JSON.parse(e);Ro("number"==typeof n),t=n}catch(e){Do("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ca._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new Xf(this.currentUser,e,t,n),i=Yf(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=Yf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=$f(this.persistenceKey,e),i=new Jf(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return Zf.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xf.Ts(new Io(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return Jf.Ts(r,t)}Ms(e){return ep.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Co("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=oc();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class rp{constructor(){this.eo=new tp,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new tp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ip{ro(e){}shutdown(){}}class sp{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Co("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Co("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let op=null;function ap(){return null===op?op=268435456+Math.round(2147483648*Math.random()):op++,"0x"+op.toString(16)}const lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class up{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const cp="WebChannelConnection";class hp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=ap(),o=this.So(e,t);Co("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Co("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw No("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=lp[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=ap();return new Promise(((s,o)=>{const a=new bo;a.setWithCredentials(!0),a.listenOnce(go.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case mo.NO_ERROR:const t=a.getResponseJson();Co(cp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case mo.TIMEOUT:Co(cp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Mo(Lo.DEADLINE_EXCEEDED,"Request time out"));break;case mo.HTTP_ERROR:const n=a.getStatus();if(Co(cp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lo).indexOf(t)>=0?t:Lo.UNKNOWN}(t.status);o(new Mo(e,t.message))}else o(new Mo(Lo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Mo(Lo.UNAVAILABLE,"Connection failed."));break;default:Po()}}finally{Co(cp,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Co(cp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=ap(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fo(),o=po(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Co(cp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new up({co:t=>{d?Co(cp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Co(cp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Co(cp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},lo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,wo.EventType.OPEN,(()=>{d||Co(cp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,wo.EventType.CLOSE,(()=>{d||(d=!0,Co(cp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(c,wo.EventType.ERROR,(t=>{d||(d=!0,No(cp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Mo(Lo.UNAVAILABLE,"The operation could not be completed")))})),p(c,wo.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ro(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Co(cp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=qc[e];if(void 0!==t)return Wc(t)}(t),i=o.message;void 0===n&&(n=Lo.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Mo(n,i)),c.close()}else Co(cp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,yo.STAT_EVENT,(t=>{t.stat===vo.PROXY?Co(cp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===vo.NOPROXY&&Co(cp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function dp(){return"undefined"!=typeof window?window:null}function fp(){return"undefined"!=typeof document?document:null}function pp(e){return new dh(e,!0)}class mp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Co("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class gp{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new mp(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Lo.RESOURCE_EXHAUSTED?(Do(t.toString()),Do("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Lo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Mo(Lo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Co("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Co("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yp extends gp{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Po()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ro(void 0===t||"string"==typeof t),vl.fromBase64String(t||"")):(Ro(void 0===t||t instanceof Uint8Array),vl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Lo.UNKNOWN:Wc(e.code);return new Mo(t,e.message||"")}(o);n=new ih(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_h(e,r.document.name),s=yh(r.document.updateTime),o=r.document.createTime?yh(r.document.createTime):Jo.min(),a=new Yl({mapValue:{fields:r.document.fields}}),l=Xl.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new nh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_h(e,r.document),s=r.readTime?yh(r.readTime):Jo.min(),o=Xl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new nh([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_h(e,r.document),s=r.removedTargetIds||[];n=new nh([],s,i,null)}else{if(!("filter"in t))return Po();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new jc(r,i),o=e.targetId;n=new rh(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Jo.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Jo.min():t.readTime?yh(t.readTime):Jo.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Ih(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Tu(r)?{documents:Nh(e,r)}:{query:Ah(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=mh(e,t.resumeToken);const r=fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Jo.min())>0){n.readTime=ph(e,t.snapshotVersion.toTimestamp());const r=fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Po()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Ih(this.serializer),t.removeTarget=e,this.e_(t)}}class vp extends gp{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Ro(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Ro(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?yh(e.updateTime):yh(t);return n.isEqual(Jo.min())&&(n=yh(t)),new Ec(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=yh(e.commitTime);return this.listener.I_(n,t)}return Ro(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Ih(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ch(this.serializer,e)))};this.e_(t)}}class wp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Mo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mo(Lo.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mo(Lo.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class bp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Do(t),this.f_=!1):Co("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class _p{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{Np(this)&&(Co("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Oo(e);t.C_.add(4),await Ep(t),t.M_.set("Unknown"),t.C_.delete(4),await Sp(t)}(this))}))})),this.M_=new bp(n,r)}}async function Sp(e){if(Np(e))for(const t of e.v_)await t(!0)}async function Ep(e){for(const t of e.v_)await t(!1)}function Ip(e,t){const n=Oo(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),Dp(n)?Cp(n):Hp(n).Ho()&&Tp(n,t))}function xp(e,t){const n=Oo(e),r=Hp(n);n.D_.delete(t),r.Ho()&&kp(n,t),0===n.D_.size&&(r.Ho()?r.Zo():Np(n)&&n.M_.set("Unknown"))}function Tp(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jo.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hp(e).u_(t)}function kp(e,t){e.x_.Oe(t),Hp(e).c_(t)}function Cp(e){e.x_=new oh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Hp(e).start(),e.M_.g_()}function Dp(e){return Np(e)&&!Hp(e).jo()&&e.D_.size>0}function Np(e){return 0===Oo(e).C_.size}function Ap(e){e.x_=void 0}async function Pp(e){e.D_.forEach(((t,n)=>{Tp(e,t)}))}async function Rp(e,t){Ap(e),Dp(e)?(e.M_.w_(t),Cp(e)):e.M_.set("Unknown")}async function Op(e,t,n){if(e.M_.set("Online"),t instanceof ih&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Co("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lp(e,n)}else if(t instanceof nh?e.x_.$e(t):t instanceof rh?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Jo.min()))try{const t=await Vf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(vl.EMPTY_BYTE_STRING,r.snapshotVersion)),kp(e,t);const i=new jh(r.target,t,n,r.sequenceNumber);Tp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Co("RemoteStore","Failed to raise snapshot:",t),await Lp(e,t)}}async function Lp(e,t,n){if(!_a(t))throw t;e.C_.add(1),await Ep(e),e.M_.set("Offline"),n||(n=()=>Vf(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Co("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await Sp(e)}))}function Mp(e,t){return t().catch((n=>Lp(e,n,t)))}async function Fp(e){const t=Oo(e),n=Yp(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Vp(t);)try{const e=await Uf(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,zp(t,e)}catch(e){await Lp(t,e)}Up(t)&&Bp(t)}function Vp(e){return Np(e)&&e.b_.length<10}function zp(e,t){e.b_.push(t);const n=Yp(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Up(e){return Np(e)&&!Yp(e).jo()&&e.b_.length>0}function Bp(e){Yp(e).start()}async function jp(e){Yp(e).E_()}async function qp(e){const t=Yp(e);for(const n of e.b_)t.P_(n.mutations)}async function Kp(e,t,n){const r=e.b_.shift(),i=Uc.from(r,t,n);await Mp(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Fp(e)}async function Gp(e,t){t&&Yp(e).h_&&await async function(e,t){if(function(e){return Gc(e)&&e!==Lo.ABORTED}(t.code)){const n=e.b_.shift();Yp(e).Yo(),await Mp(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Fp(e)}}(e,t),Up(e)&&Bp(e)}async function Wp(e,t){const n=Oo(e);n.asyncQueue.verifyOperationInProgress(),Co("RemoteStore","RemoteStore received new credentials");const r=Np(n);n.C_.add(3),await Ep(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await Sp(n)}async function Qp(e,t){const n=Oo(e);t?(n.C_.delete(2),await Sp(n)):t||(n.C_.add(2),await Ep(n),n.M_.set("Unknown"))}function Hp(e){return e.O_||(e.O_=function(e,t,n){const r=Oo(e);return r.A_(),new yp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Pp.bind(null,e),Io:Rp.bind(null,e),a_:Op.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),Dp(e)?Cp(e):e.M_.set("Unknown")):(await e.O_.stop(),Ap(e))}))),e.O_}function Yp(e){return e.N_||(e.N_=function(e,t,n){const r=Oo(e);return r.A_(),new vp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:jp.bind(null,e),Io:Gp.bind(null,e),T_:qp.bind(null,e),I_:Kp.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await Fp(e)):(await e.N_.stop(),e.b_.length>0&&(Co("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class $p{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new $p(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mo(Lo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(e,t){if(Do("AsyncQueue","".concat(t,": ").concat(e)),_a(e))return new Mo(Lo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Jp{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ra.comparator(t.key,n.key):(e,t)=>ra.comparator(e.key,t.key),this.keyedMap=Xu(),this.sortedSet=new cl(this.comparator)}static emptySet(e){return new Jp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Jp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Zp{constructor(){this.B_=new cl(ra.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Po():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class em{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new em(e,t,Jp.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class tm{constructor(){this.k_=void 0,this.listeners=[]}}class nm{constructor(){this.queries=new Qu((e=>Bu(e)),Uu),this.onlineState="Unknown",this.q_=new Set}}async function rm(e,t){const n=Oo(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tm),i)try{s.k_=await n.onListen(r)}catch(e){const n=Xp(e,"Initialization of query '".concat(ju(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&am(n)}async function im(e,t){const n=Oo(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function sm(e,t){const n=Oo(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&am(n)}function om(e,t,n){const r=Oo(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function am(e){e.q_.forEach((e=>{e.next()}))}class lm{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new em(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=em.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class um{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class cm{constructor(e){this.serializer=e}hs(e){return _h(this.serializer,e)}Ps(e){return e.metadata.exists?kh(this.serializer,e.document,!1):Xl.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return yh(e)}}class hm{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dm(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=ea.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new cm(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ic()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Oo(e);let s=ic(),o=Yu();for(const u of n){const e=t.hs(u.metadata.name);u.document&&(s=s.add(e));const n=t.Ps(u);n.setReadTime(t.Is(u.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await Bf(i,function(e){return Mu(Pu(ea.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>zf(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new cm(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await Qf(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function dm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class fm{constructor(e){this.key=e}}class pm{constructor(e){this.key=e}}class mm{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ic(),this.mutatedKeys=ic(),this._a=Gu(e),this.aa=new Jp(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new Zp,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=qu(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.ha(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this._a(c,a)>0||l&&this._a(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Po()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new em(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new Zp,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ic(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new pm(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new fm(n))})),t}da(e){this.ia=e.ls,this.oa=ic();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return em.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class gm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ym{constructor(e){this.key=e,this.Ra=!1}}class vm{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Qu((e=>Bu(e)),Uu),this.fa=new Map,this.ga=new Set,this.pa=new cl(ra.comparator),this.ya=new Map,this.wa=new gf,this.Sa={},this.ba=new Map,this.Da=Kd.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function wm(e,t){const n=Gm(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await Bf(n.localStore,Mu(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await bm(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Ip(n.remoteStore,e)}return i}async function bm(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await qf(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Am(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await qf(e.localStore,t,!0),o=new mm(t,s.ls),a=o.ca(s.documents),l=th.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);Am(e,n,u.Ta);const c=new gm(t,n,o);return e.ma.set(t,c),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),u.snapshot}async function _m(e,t){const n=Oo(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!Uu(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jf(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),xp(n.remoteStore,r.targetId),Dm(n,r.targetId)})).catch(ma)):(Dm(n,r.targetId),await jf(n.localStore,r.targetId,!0))}async function Sm(e,t){const n=Oo(e);try{const e=await function(e,t){const n=Oo(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(vl.EMPTY_BYTE_STRING,Jo.min()).withLastLimboFreeSnapshotVersion(Jo.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.qr.updateTargetData(e,u))}));let a=Yu(),l=ic();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(zf(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(Jo.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return ga.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Ro(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Ro(r.Ra):e.removedDocuments.size>0&&(Ro(r.Ra),r.Ra=!1))})),await Om(n,e,t)}catch(e){await ma(e)}}function Em(e,t,n){const r=Oo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Oo(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&am(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Im(e,t,n){const r=Oo(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new cl(ra.comparator);e=e.insert(s,Xl.newNoDocument(s,Jo.min()));const n=ic().add(s),i=new eh(Jo.min(),new Map,new cl(Ho),e,n);await Sm(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),Rm(r)}else await jf(r.localStore,t,!1).then((()=>Dm(r,t,n))).catch(ma)}async function xm(e,t){const n=Oo(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Oo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=ga.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ro(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ic();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Cm(n,r,null),km(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Om(n,e)}catch(e){await ma(e)}}async function Tm(e,t,n){const r=Oo(e);try{const e=await function(e,t){const n=Oo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ro(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Cm(r,t,n),km(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Om(r,e)}catch(n){await ma(n)}}function km(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function Cm(e,t,n){const r=Oo(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function Dm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||Nm(e,t)}))}function Nm(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(xp(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),Rm(e))}function Am(e,t,n){for(const r of n)r instanceof fm?(e.wa.addReference(r.key,t),Pm(e,r)):r instanceof pm?(Co("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||Nm(e,r.key)):Po()}function Pm(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Co("SyncEngine","New document in limbo: "+n),e.ga.add(r),Rm(e))}function Rm(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new ra(ea.fromString(t)),r=e.Da.next();e.ya.set(r,new ym(n)),e.pa=e.pa.insert(n,r),Ip(e.remoteStore,new jh(Mu(Pu(n.path)),r,"TargetPurposeLimboResolution",Ca._e))}}async function Om(e,t,n){const r=Oo(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Pf.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Oo(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ga.forEach(t,(t=>ga.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>ga.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!_a(e))throw e;Co("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function Lm(e,t){const n=Oo(e);if(!n.currentUser.isEqual(t)){Co("SyncEngine","User change. New user:",t.toKey());const e=await Ff(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Mo(Lo.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Om(n,e._s)}}function Mm(e,t){const n=Oo(e),r=n.ya.get(t);if(r&&r.Ra)return ic().add(r.key);{let e=ic();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function Fm(e,t){const n=Oo(e),r=await qf(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&Am(n,t.targetId,i.Ta),i}async function Vm(e,t){const n=Oo(e);return Gf(n.localStore,t).then((e=>Om(n,e)))}async function zm(e,t,n,r){const i=Oo(e),s=await function(e,t){const n=Oo(e),r=Oo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):ga.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Fp(i.remoteStore):"acknowledged"===n||"rejected"===n?(Cm(i,t,r||null),km(i,t),function(e,t){Oo(Oo(e).mutationQueue).Fn(t)}(i.localStore,t)):Po(),await Om(i,s)):Co("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Um(e,t,n){const r=Oo(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await Bf(r.localStore,Mu(t[0]));for(const e of t){const t=r.ma.get(e),n=await Fm(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Kf(r.localStore,o);e=await Bf(r.localStore,t),await bm(r,Bm(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function Bm(e){return Au(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jm(e){return function(e){return Oo(Oo(e).persistence).Bi()}(Oo(e).localStore)}async function qm(e,t,n,r){const i=Oo(e);if(i.Ca)return void Co("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Gf(i.localStore,Ku(s[0])),r=eh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,vl.EMPTY_BYTE_STRING);await Om(i,e,r);break}case"rejected":await jf(i.localStore,t,!0),Dm(i,t,r);break;default:Po()}}async function Km(e,t,n){const r=Gm(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Co("SyncEngine","Adding an already active target "+e);continue}const t=await Kf(r.localStore,e),n=await Bf(r.localStore,t);await bm(r,Bm(t),n.targetId,!1,n.resumeToken),Ip(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await jf(r.localStore,e,!1).then((()=>{xp(r.remoteStore,e),Dm(r,e)})).catch(ma)}}function Gm(e){const t=Oo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Im.bind(null,t),t.Va.a_=sm.bind(null,t.eventManager),t.Va.Fa=om.bind(null,t.eventManager),t}function Wm(e){const t=Oo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tm.bind(null,t),t}class Qm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Mf(this.persistence,new Of,e.initialUser,this.serializer)}createPersistence(e){return new Sf(If.jr,this.serializer)}createSharedClientState(e){return new rp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hm extends Qm{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Wm(this.xa.syncEngine),await Fp(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Mf(this.persistence,new Of,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Xd(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ka(t,this.persistence);return new Ta(e.asyncQueue,n)}createPersistence(e){const t=Af(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Md.withCacheSize(this.cacheSizeBytes):Md.DEFAULT;return new Cf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dp(),fp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rp}}class Ym extends Hm{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof np&&(this.sharedClientState.syncEngine={Ys:zm.bind(null,t),Zs:qm.bind(null,t),Xs:Km.bind(null,t),Bi:jm.bind(null,t),Js:Vm.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Oo(e);if(Gm(n),Wm(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Um(n,e.toArray());n.Ca=!0,await Qp(n.remoteStore,!0);for(const r of t)Ip(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Dm(n,i),jf(n.localStore,i,!0)))),xp(n.remoteStore,i)})),await t,await Um(n,e),function(e){const t=Oo(e);t.ya.forEach(((e,n)=>{xp(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new cl(ra.comparator)}(n),n.Ca=!1,await Qp(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=dp();if(!np.D(t))throw new Mo(Lo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Af(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new np(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class $m{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Em(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Lm.bind(null,this.syncEngine),await Qp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nm}createDatastore(e){const t=pp(e.databaseInfo.databaseId),n=function(e){return new hp(e)}(e.databaseInfo);return function(e,t,n,r){return new wp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _p(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Em(this.syncEngine,e,0)),sp.D()?new sp:new ip)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new vm(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Oo(e);Co("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await Ep(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function Xm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Jm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Do("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Zm{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Fo,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new um(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class eg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Mo(Lo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Oo(e),r=Ih(n.serializer)+"/documents",i={documents:t.map((e=>bh(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Ro(!!t.found),t.found.name,t.found.updateTime;const n=_h(e,t.found.name),r=yh(t.found.updateTime),i=t.found.createTime?yh(t.found.createTime):Jo.min(),s=new Yl({mapValue:{fields:t.found.fields}});return Xl.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Ro(!!t.missing),Ro(!!t.readTime);const n=_h(e,t.missing),r=yh(t.readTime);return Xl.newNoDocument(n,r)}(e,t):Po()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Ro(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ra.fromPath(t);this.mutations.push(new Vc(n,this.precondition(n)))})),await async function(e,t){const n=Oo(e),r=Ih(n.serializer)+"/documents",i={writes:t.map((e=>Ch(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Po();t=Jo.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Mo(Lo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jo.min())?Ic.exists(!1):Ic.updateTime(t):Ic.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jo.min()))throw new Mo(Lo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ic.updateTime(t)}return Ic.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new mp(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new eg(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Da(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Gc(t)}return!1}}class ng{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Io.UNAUTHENTICATED,this.clientId=Qo.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Co("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Co("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mo(Lo.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Xp(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function rg(e,t){e.asyncQueue.verifyOperationInProgress(),Co("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Ff(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function ig(e,t){e.asyncQueue.verifyOperationInProgress();const n=await og(e);Co("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Wp(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Wp(t.remoteStore,n))),e._onlineComponents=t}function sg(e){return"FirebaseError"===e.name?e.code===Lo.FAILED_PRECONDITION||e.code===Lo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function og(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Co("FirestoreClient","Using user provided OfflineComponentProvider");try{await rg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!sg(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await rg(e,new Qm)}}else Co("FirestoreClient","Using default OfflineComponentProvider"),await rg(e,new Qm);return e._offlineComponents}async function ag(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Co("FirestoreClient","Using user provided OnlineComponentProvider"),await ig(e,e._uninitializedComponentsProvider._online)):(Co("FirestoreClient","Using default OnlineComponentProvider"),await ig(e,new $m))),e._onlineComponents}function lg(e){return og(e).then((e=>e.persistence))}function ug(e){return og(e).then((e=>e.localStore))}function cg(e){return ag(e).then((e=>e.remoteStore))}function hg(e){return ag(e).then((e=>e.syncEngine))}function dg(e){return ag(e).then((e=>e.datastore))}async function fg(e){const t=await ag(e),n=t.eventManager;return n.onListen=wm.bind(null,t.syncEngine),n.onUnlisten=_m.bind(null,t.syncEngine),n}function pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Jm({next:s=>{t.enqueueAndForget((()=>im(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Mo(Lo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Mo(Lo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new lm(Pu(n.path),s,{includeMetadataChanges:!0,J_:!0});return rm(e,o)}(await fg(e),e.asyncQueue,t,n,r))),r.promise}function mg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fo;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Jm({next:n=>{t.enqueueAndForget((()=>im(e,o))),n.fromCache&&"server"===r.source?i.reject(new Mo(Lo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new lm(n,s,{includeMetadataChanges:!0,J_:!0});return rm(e,o)}(await fg(e),e.asyncQueue,t,n,r))),r.promise}function gg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Hc().encode(e):e,function(e,t){return new Zm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xm(e,t);if(e instanceof ArrayBuffer)return Xm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,pp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Oo(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Oo(e),r=yh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(dm(r));const i=new hm(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await Om(e,o.ra,void 0),await function(e,t){const n=Oo(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return No("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await hg(e),i,r)}))}function yg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const vg=new Map;function wg(e,t,n){if(!n)throw new Mo(Lo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bg(e,t,n,r){if(!0===t&&!0===r)throw new Mo(Lo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _g(e){if(!ra.isDocumentKey(e))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sg(e){if(ra.isDocumentKey(e))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Eg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Po()}function Ig(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mo(Lo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Eg(e);throw new Mo(Lo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function xg(e,t){if(t<=0)throw new Mo(Lo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Tg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Mo(Lo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Mo(Lo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Mo(Lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Mo(Lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Mo(Lo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zo;switch(e.type){case"firstParty":return new qo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mo(Lo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vg.get(e);t&&(Co("ComponentProvider","Removing Datastore"),vg.delete(e),t.terminate())}(this),Promise.resolve()}}function Cg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Ig(e,kg))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Io.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Mo(Lo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Io(s)}e._authCredentials=new Uo(new Vo(t,n))}}class Dg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Dg(this.firestore,e,this._query)}}class Ng{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ag(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ng(this.firestore,e,this._key)}}class Ag extends Dg{constructor(e,t,n){super(e,t,Pu(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ng(this.firestore,null,new ra(e))}withConverter(e){return new Ag(this.firestore,e,this._path)}}function Pg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ue(e),wg("collection","path",t),e instanceof kg){const n=ea.fromString(t,...r);return Sg(n),new Ag(e,null,n)}{if(!(e instanceof Ng||e instanceof Ag))throw new Mo(Lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ea.fromString(t,...r));return Sg(n),new Ag(e.firestore,null,n)}}function Rg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ue(e),1===arguments.length&&(t=Qo.newId()),wg("doc","path",t),e instanceof kg){const n=ea.fromString(t,...r);return _g(n),new Ng(e,null,new ra(n))}{if(!(e instanceof Ng||e instanceof Ag))throw new Mo(Lo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ea.fromString(t,...r));return _g(n),new Ng(e.firestore,e instanceof Ag?e.converter:null,new ra(n))}}function Og(e,t){return e=Ue(e),t=Ue(t),(e instanceof Ng||e instanceof Ag)&&(t instanceof Ng||t instanceof Ag)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Lg(e,t){return e=Ue(e),t=Ue(t),e instanceof Dg&&t instanceof Dg&&e.firestore===t.firestore&&Uu(e._query,t._query)&&e.converter===t.converter}class Mg{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new mp(this,"async_queue_retry"),this.iu=()=>{const e=fp();e&&Co("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=fp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=fp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Fo;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!_a(e))throw e;Co("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Do("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=$p.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Po()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function Fg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Vg{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zg extends kg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Mg,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Bg(this),this._firestoreClient.terminate()}}function Ug(e){return e._firestoreClient||Bg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Bg(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Tl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ng(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function jg(e,t,n){const r=new Fo;return e.asyncQueue.enqueue((async()=>{try{await rg(e,n),await ig(e,t),r.resolve()}catch(e){const n=e;if(!sg(n))throw n;No("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function qg(e){return function(e){const t=new Fo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Oo(e);Np(n.remoteStore)||Co("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Oo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=Xp(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await hg(e),t))),t.promise}(Ug(e=Ig(e,zg)))}function Kg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lg(e),n=await cg(e);return t.setNetworkEnabled(!0),function(e){const t=Oo(e);return t.C_.delete(0),Sp(t)}(n)}))}(Ug(e=Ig(e,zg)))}function Gg(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lg(e),n=await cg(e);return t.setNetworkEnabled(!1),async function(e){const t=Oo(e);t.C_.add(0),await Ep(t),t.M_.set("Offline")}(n)}))}(Ug(e=Ig(e,zg)))}function Wg(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Oo(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await ug(e),t)))}(Ug(e=Ig(e,zg)),t).then((t=>t?new Dg(e,null,t.query):null))}function Qg(e){if(e._initialized||e._terminated)throw new Mo(Lo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hg(vl.fromBase64String(e))}catch(e){throw new Mo(Lo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Hg(vl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new na(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $g{constructor(e){this._methodName=e}}class Xg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mo(Lo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mo(Lo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ho(this._lat,e._lat)||Ho(this._long,e._long)}}const Jg=/^__.*__$/;class Zg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class ey{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Rc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ty(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Po()}}class ny{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new ny(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Sy(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(ty(this.Iu)&&Jg.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ry{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||pp(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ny({Iu:e,methodName:t,gu:n,path:na.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iy(e){const t=e._freezeSettings(),n=pp(e._databaseId);return new ry(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sy(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);vy("Data must be an object, but it was:",o,r);const a=gy(r,o);let l,u;if(s.merge)l=new gl(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=wy(t,r,n);if(!o.contains(i))throw new Mo(Lo.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ey(e,i)||e.push(i)}l=new gl(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new Zg(new Yl(a),l,u)}class oy extends $g{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oy}}function ay(e,t,n){return new ny({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ly extends $g{_toFieldTransform(e){return new Sc(e.path,new pc)}isEqual(e){return e instanceof ly}}class uy extends $g{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ay(this,e,!0),n=this.yu.map((e=>my(e,t))),r=new mc(n);return new Sc(e.path,r)}isEqual(e){return this===e}}class cy extends $g{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ay(this,e,!0),n=this.yu.map((e=>my(e,t))),r=new yc(n);return new Sc(e.path,r)}isEqual(e){return this===e}}class hy extends $g{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new wc(e.serializer,uc(e.serializer,this.wu));return new Sc(e.path,t)}isEqual(e){return this===e}}function dy(e,t,n,r){const i=e.pu(1,t,n);vy("Data must be an object, but it was:",i,r);const s=[],o=Yl.empty();ll(r,((e,r)=>{const a=_y(t,e,n);r=Ue(r);const l=i.Ru(a);if(r instanceof oy)s.push(a);else{const e=my(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new gl(s);return new ey(o,a,i.fieldTransforms)}function fy(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[wy(t,r,n)],l=[i];if(s.length%2!=0)throw new Mo(Lo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(wy(t,s[d])),l.push(s[d+1]);const u=[],c=Yl.empty();for(let d=a.length-1;d>=0;--d)if(!Ey(u,a[d])){const e=a[d];let t=l[d];t=Ue(t);const n=o.Ru(e);if(t instanceof oy)u.push(e);else{const r=my(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new gl(u);return new ey(c,h,o.fieldTransforms)}function py(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return my(n,e.pu(r?4:3,t))}function my(e,t){if(yy(e=Ue(e)))return vy("Unsupported field value:",t,e),gy(e,t);if(e instanceof $g)return function(e,t){if(!ty(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=my(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ue(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xo.fromDate(e);return{timestampValue:ph(t.serializer,n)}}if(e instanceof Xo){const n=new Xo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ph(t.serializer,n)}}if(e instanceof Xg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Hg)return{bytesValue:mh(t.serializer,e._byteString)};if(e instanceof Ng){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:vh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(Eg(e)))}(e,t)}function gy(e,t){const n={};return ul(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ll(e,((e,r)=>{const i=my(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xo||e instanceof Xg||e instanceof Hg||e instanceof Ng||e instanceof $g)}function vy(e,t,n){if(!yy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Eg(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function wy(e,t,n){if((t=Ue(t))instanceof Yg)return t._internalPath;if("string"==typeof t)return _y(e,t);throw Sy("Field path arguments must be of type string or ",e,!1,void 0,n)}const by=new RegExp("[~\\*/\\[\\]]");function _y(e,t,n){if(t.search(by)>=0)throw Sy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Yg(...t.split("."))._internalPath}catch(gn){throw Sy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Sy(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Mo(Lo.INVALID_ARGUMENT,a+e+l)}function Ey(e,t){return e.some((e=>e.isEqual(t)))}class Iy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ng(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xy extends Iy{data(){return super.data()}}function Ty(e,t){return"string"==typeof t?_y(e,t):t instanceof Yg?t._internalPath:t._delegate._internalPath}function ky(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Mo(Lo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cy{}class Dy extends Cy{}function Ny(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Cy&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Py)).length,n=e.filter((e=>e instanceof Ay)).length;if(t>1||t>0&&n>0)throw new Mo(Lo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ay extends Dy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ay(e,t,n)}_apply(e){const t=this._parse(e);return Uy(e._query,t),new Dg(e.firestore,e.converter,Vu(e._query,t))}_parse(e){const t=iy(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){zy(o,s);const t=[];for(const n of o)t.push(Vy(r,e,n));a={arrayValue:{values:t}}}else a=Vy(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||zy(o,s),a=py(n,t,o,"in"===s||"not-in"===s);return iu.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Py extends Cy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Py(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:su.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Uy(n,i),n=Vu(n,i)}(e._query,t),new Dg(e.firestore,e.converter,Vu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ry extends Dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ry(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tu(t,n)}(e._query,this._field,this._direction);return new Dg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Nu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Oy extends Dy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Oy(e,t,n)}_apply(e){return new Dg(e.firestore,e.converter,zu(e._query,this._limit,this._limitType))}}class Ly extends Dy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ly(e,t,n)}_apply(e){const t=Fy(e,this.type,this._docOrFields,this._inclusive);return new Dg(e.firestore,e.converter,function(e,t){return new Nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class My extends Dy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new My(e,t,n)}_apply(e){const t=Fy(e,this.type,this._docOrFields,this._inclusive);return new Dg(e.firestore,e.converter,function(e,t){return new Nu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Fy(e,t,n,r){if(n[0]=Ue(n[0]),n[0]instanceof Iy)return function(e,t,n,r,i){if(!r)throw new Mo(Lo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Lu(e))if(o.field.isKeyField())s.push(Fl(t,r.key));else{const e=r.data.field(o.field);if(El(e))throw new Mo(Lo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Jl(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=iy(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Mo(Lo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Ou(e)&&-1!==s.indexOf("/"))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ea.fromString(s));if(!ra.isDocumentKey(n))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ra(n);a.push(Fl(t,i))}else{const e=py(n,r,s);a.push(e)}}return new Jl(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Vy(e,t,n){if("string"==typeof(n=Ue(n))){if(""===n)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ou(t)&&-1!==n.indexOf("/"))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ea.fromString(n));if(!ra.isDocumentKey(r))throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fl(e,new ra(r))}if(n instanceof Ng)return Fl(e,n._key);throw new Mo(Lo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Eg(n),"."))}function zy(e,t){if(!Array.isArray(e)||0===e.length)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Uy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Mo(Lo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class By{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _l(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Po()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ll(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Xg(_l(e.latitude),_l(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Il(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const t=bl(e);return new Xo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ea.fromString(e);Ro(Bh(n));const r=new kl(n.get(1),n.get(3)),i=new ra(n.popFirst(5));return r.isEqual(t)||Do("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function jy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qy extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ng(this.firestore,null,t)}}class Ky{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gy extends Iy{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Wy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Wy extends Gy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Qy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Ky(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Wy(this._firestore,this._userDataWriter,n.key,n,new Ky(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mo(Lo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Wy(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Ky(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Wy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Ky(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Hy(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Hy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Po()}}function Yy(e,t){return e instanceof Gy&&t instanceof Gy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Qy&&t instanceof Qy&&e._firestore===t._firestore&&Lg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class $y extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ng(this.firestore,null,t)}}function Xy(e){e=Ig(e,Ng);const t=Ig(e.firestore,zg),n=Ug(t),r=new $y(t);return function(e,t){const n=new Fo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Oo(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Mo(Lo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Xp(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await ug(e),t,n))),n.promise}(n,e._key).then((n=>new Gy(t,r,e._key,n,new Ky(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Jy(e){e=Ig(e,Dg);const t=Ig(e.firestore,zg),n=Ug(t),r=new $y(t);return function(e,t){const n=new Fo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await qf(e,t,!0),i=new mm(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Xp(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ug(e),t,n))),n.promise}(n,e._query).then((n=>new Qy(t,r,e,n)))}function Zy(e,t,n){e=Ig(e,Ng);const r=Ig(e.firestore,zg),i=jy(e.converter,t,n);return rv(r,[sy(iy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ic.none())])}function ev(e,t,n){e=Ig(e,Ng);const r=Ig(e.firestore,zg),i=iy(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Ue(t))||t instanceof Yg?fy(i,"updateDoc",e._key,t,n,a):dy(i,"updateDoc",e._key,t),rv(r,[s.toMutation(e._key,Ic.exists(!0))])}function tv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Ue(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Fg(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(Fg(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof Ng)h=Ig(e.firestore,zg),d=Pu(e._key.path),c={next:t=>{n[l]&&n[l](iv(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Ig(e,Dg);h=Ig(t.firestore,zg),d=t._query;const r=new $y(h);c={next:e=>{n[l]&&n[l](new Qy(h,r,t,e))},error:n[l+1],complete:n[l+2]},ky(e._query)}return function(e,t,n,r){const i=new Jm(r),s=new lm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>rm(await fg(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>im(await fg(e),s)))}}(Ug(h),d,u,c)}function nv(e,t){return function(e,t){const n=new Jm(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oo(e).q_.add(t),t.next()}(await fg(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Oo(e).q_.delete(t)}(await fg(e),n)))}}(Ug(e=Ig(e,zg)),Fg(t)?t:{next:t})}function rv(e,t){return function(e,t){const n=new Fo;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Wm(e);try{const e=await function(e,t){const n=Oo(e),r=Xo.now(),i=t.reduce(((e,t)=>e.add(t.key)),ic());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Yu(),l=ic();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Nc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Rc(e.key,t,$l(t.value.mapValue),Ic.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ju(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new cl(Ho)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Om(r,e.changes),await Fp(r.remoteStore)}catch(e){const t=Xp(e,"Failed to persist write");n.reject(t)}}(await hg(e),t,n))),n.promise}(Ug(e),t)}function iv(e,t,n){const r=n.docs.get(t._key),i=new $y(e);return new Gy(e,i,t._key,r,new Ky(n.hasPendingWrites,n.fromCache),t.converter)}const sv={maxAttempts:5};class ov{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=iy(e)}set(e,t,n){this._verifyNotCommitted();const r=av(e,this._firestore),i=jy(r.converter,t,n),s=sy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ic.none())),this}update(e,t,n){this._verifyNotCommitted();const r=av(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ue(t))||t instanceof Yg?fy(this._dataReader,"WriteBatch.update",r._key,t,n,o):dy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ic.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=av(e,this._firestore);return this._mutations=this._mutations.concat(new Fc(t._key,Ic.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mo(Lo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function av(e,t){if((e=Ue(e)).firestore!==t)throw new Mo(Lo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class lv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=iy(e)}get(e){const t=av(e,this._firestore),n=new qy(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Po();const r=e[0];if(r.isFoundDocument())return new Iy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Iy(this._firestore,n,t._key,null,t.converter);throw Po()}))}set(e,t,n){const r=av(e,this._firestore),i=jy(r.converter,t,n),s=sy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=av(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Ue(t))||t instanceof Yg?fy(this._dataReader,"Transaction.update",r._key,t,n,o):dy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=av(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=av(e,this._firestore),n=new $y(this._firestore);return super.get(e).then((e=>new Gy(this._firestore,n,t._key,e._document,new Ky(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xo=e}(At),xt(new Be("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new zg(new Bo(e.getProvider("auth-internal")),new Go(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mo(Lo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Mt(Eo,"4.4.0",e),Mt(Eo,"4.4.0","esm2017")}();function uv(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cv(){if("undefined"===typeof Uint8Array)throw new Mo("unimplemented","Uint8Arrays are not available in this environment.")}function hv(){if("undefined"==typeof atob)throw new Mo("unimplemented","Blobs are unavailable in Firestore in this environment.")}class dv{constructor(e){this._delegate=e}static fromBase64String(e){return hv(),new dv(Hg.fromBase64String(e))}static fromUint8Array(e){return cv(),new dv(Hg.fromUint8Array(e))}toBase64(){return hv(),this._delegate.toBase64()}toUint8Array(){return cv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class pv{enableIndexedDbPersistence(e,t){return function(e,t){Qg(e=Ig(e,zg));const n=Ug(e);if(n._uninitializedComponentsProvider)throw new Mo(Lo.FAILED_PRECONDITION,"SDK cache is already specified.");No("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new $m;return jg(n,i,new Hm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Qg(e=Ig(e,zg));const t=Ug(e);if(t._uninitializedComponentsProvider)throw new Mo(Lo.FAILED_PRECONDITION,"SDK cache is already specified.");No("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new $m;return jg(t,r,new Ym(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Mo(Lo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fo;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!va.D())return Promise.resolve();const t=e+"main";await va.delete(t)}(Af(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class mv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof kl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||No("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cg(this._delegate,e,t,n)}enableNetwork(){return Kg(this._delegate)}disableNetwork(){return Gg(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,bg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qg(this._delegate)}onSnapshotsInSync(e){return nv(this._delegate,e)}get app(){if(!this._appCompat)throw new Mo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dv(this,Pg(this._delegate,e))}catch(t){throw _v(t,"collection()","Firestore.collection()")}}doc(e){try{return new bv(this,Rg(this._delegate,e))}catch(t){throw _v(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Tv(this,function(e,t){if(e=Ig(e,kg),wg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mo(Lo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Dg(e,null,function(e){return new Nu(ea.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _v(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Ig(e,zg);const r=Object.assign(Object.assign({},sv),n);return function(e){if(e.maxAttempts<1)throw new Mo(Lo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Fo;return e.asyncQueue.enqueueAndForget((async()=>{const i=await dg(e);new tg(e.asyncQueue,i,n,t,r).run()})),r.promise}(Ug(e),(n=>t(new lv(e,n))),r)}(this._delegate,(t=>e(new yv(this,t))))}batch(){return Ug(this._delegate),new vv(new ov(this._delegate,(e=>rv(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Ug(e=Ig(e,zg)),r=new Vg;return gg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Wg(this._delegate,e).then((e=>e?new Tv(this,e):null))}}class gv extends By{constructor(e){super(),this.firestore=e}convertBytes(e){return new dv(new Hg(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bv.forKey(t,this.firestore,null)}}class yv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gv(e)}get(e){const t=Nv(e);return this._delegate.get(t).then((e=>new Iv(this._firestore,new Gy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Nv(e);return n?(uv("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Nv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Nv(e);return this._delegate.delete(t),this}}class vv{constructor(e){this._delegate=e}set(e,t,n){const r=Nv(e);return n?(uv("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Nv(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Nv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Wy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=wv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new wv(e,new gv(e),t),r.set(t,i)),i}}wv.INSTANCES=new WeakMap;class bv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Mo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new bv(t,new Ng(t._delegate,n,new ra(e)))}static forKey(e,t,n){return new bv(t,new Ng(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Dv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dv(this.firestore,Pg(this._delegate,e))}catch(t){throw _v(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ue(e))instanceof Ng&&Og(this._delegate,e)}set(e,t){t=uv("DocumentReference.set",t);try{return t?Zy(this._delegate,e,t):Zy(this._delegate,e)}catch(n){throw _v(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ev(this._delegate,e):ev(this._delegate,e,t,...r)}catch(s){throw _v(s,"updateDoc()","DocumentReference.update()")}}delete(){return rv(Ig((e=this._delegate).firestore,zg),[new Fc(e._key,Ic.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Sv(t),i=Ev(t,(e=>new Iv(this.firestore,new Gy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return tv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Xy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ig(e,Ng);const t=Ig(e.firestore,zg);return pg(Ug(t),e._key,{source:"server"}).then((n=>iv(t,e,n)))}(this._delegate):function(e){e=Ig(e,Ng);const t=Ig(e.firestore,zg);return pg(Ug(t),e._key).then((n=>iv(t,e,n)))}(this._delegate),t.then((e=>new Iv(this.firestore,new Gy(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new bv(this.firestore,e?this._delegate.withConverter(wv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _v(e,t,n){return e.message=e.message.replace(t,n),e}function Sv(e){for(const t of e)if("object"===typeof t&&!fv(t))return t;return{}}function Ev(e,t){var n,r;let i;return i=fv(e[0])?e[0]:fv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Iv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yy(this._delegate,e._delegate)}}class xv extends Iv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Po(),t}}class Tv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gv(e)}where(e,t,n){try{return new Tv(this.firestore,Ny(this._delegate,function(e,t,n){const r=t,i=Ty("where",e);return Ay._create(i,r,n)}(e,t,n)))}catch(r){throw _v(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Tv(this.firestore,Ny(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ty("orderBy",e);return Ry._create(n,t)}(e,t)))}catch(n){throw _v(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Tv(this.firestore,Ny(this._delegate,(xg("limit",t=e),Oy._create("limit",t,"F"))))}catch(t){throw _v(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Tv(this.firestore,Ny(this._delegate,(xg("limitToLast",t=e),Oy._create("limitToLast",t,"L"))))}catch(t){throw _v(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Tv(this.firestore,Ny(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ly._create("startAt",t,!0)}(...arguments)))}catch(e){throw _v(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Tv(this.firestore,Ny(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ly._create("startAfter",t,!1)}(...arguments)))}catch(e){throw _v(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Tv(this.firestore,Ny(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return My._create("endBefore",t,!1)}(...arguments)))}catch(e){throw _v(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Tv(this.firestore,Ny(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return My._create("endAt",t,!0)}(...arguments)))}catch(e){throw _v(e,"endAt()","Query.endAt()")}}isEqual(e){return Lg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Jy(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ig(e,Dg);const t=Ig(e.firestore,zg),n=Ug(t),r=new $y(t);return mg(n,e._query,{source:"server"}).then((n=>new Qy(t,r,e,n)))}(this._delegate):function(e){e=Ig(e,Dg);const t=Ig(e.firestore,zg),n=Ug(t),r=new $y(t);return ky(e._query),mg(n,e._query).then((n=>new Qy(t,r,e,n)))}(this._delegate),t.then((e=>new Cv(this.firestore,new Qy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Sv(t),i=Ev(t,(e=>new Cv(this.firestore,new Qy(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return tv(this._delegate,r,i)}withConverter(e){return new Tv(this.firestore,e?this._delegate.withConverter(wv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class kv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new xv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Tv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new xv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new kv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new xv(this._firestore,n))}))}isEqual(e){return Yy(this._delegate,e._delegate)}}class Dv extends Tv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bv(this.firestore,e):null}doc(e){try{return new bv(this.firestore,void 0===e?Rg(this._delegate):Rg(this._delegate,e))}catch(t){throw _v(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Ig(e.firestore,zg),r=Rg(e),i=jy(e.converter,t);return rv(n,[sy(iy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ic.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new bv(this.firestore,e)))}isEqual(e){return Og(this._delegate,e._delegate)}withConverter(e){return new Dv(this.firestore,e?this._delegate.withConverter(wv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Nv(e){return Ig(e,Ng)}class Av{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new Yg(...t)}static documentId(){return new Av(na.keyField().canonicalString())}isEqual(e){return(e=Ue(e))instanceof Yg&&this._delegate._internalPath.isEqual(e._internalPath)}}class Pv{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ly("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Pv(e)}static delete(){const e=new oy("deleteField");return e._methodName="FieldValue.delete",new Pv(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uy("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Pv(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cy("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Pv(e)}static increment(e){const t=new hy("increment",e);return t._methodName="FieldValue.increment",new Pv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Rv={Firestore:mv,GeoPoint:Xg,Timestamp:Xo,Blob:dv,Transaction:yv,WriteBatch:vv,DocumentReference:bv,DocumentSnapshot:Iv,Query:Tv,QueryDocumentSnapshot:xv,QuerySnapshot:Cv,CollectionReference:Dv,FieldPath:Av,FieldValue:Pv,setLogLevel:function(e){var t;t=e,To.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Ov;(function(e,t){e.INTERNAL.registerComponent(new Be("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Rv)))})(Ov=tn,((e,t)=>new mv(e,t,new pv))),Ov.registerVersion("@firebase/firestore-compat","0.3.23");tn.initializeApp({apiKey:"AIzaSyDaLHxnSQISuBoLwAs5w1Qa7TX5rmYOHSY",authDomain:"works-9f72a.firebaseapp.com",projectId:"works-9f72a",storageBucket:"works-9f72a.appspot.com",messagingSenderId:"681871100798",appId:"1:681871100798:web:84740469ccef5ba627812f"});const Lv=tn;var Mv=n(164),Fv=n.t(Mv,2);function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vv.apply(this,arguments)}function zv(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Uv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Bv=i.startTransition;Fv.flushSync;function jv(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),p((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:d(t)}),null,a)));let l=o.current,[u,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:f}=i||{},m=r.useCallback((e=>{f&&Bv?Bv((()=>c(e))):c(e)}),[c,f]);return r.useLayoutEffect((()=>l.listen(m)),[l,m]),r.createElement(me,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}const qv="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gv=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:u,target:c,to:h,preventScrollReset:f,unstable_viewTransition:p}=e,m=zv(e,Uv),{basename:g}=r.useContext(G),y=!1;if("string"===typeof h&&Kv.test(h)&&(n=h,qv))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=N(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:y=!0}catch(b){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Y()||l(!1);let{basename:i,navigator:s}=r.useContext(G),{hash:o,pathname:a,search:u}=ee(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:L([i,a])),s.createHref({pathname:c,search:u,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=J(),c=$(),h=ee(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:d(c)===d(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[c,u,h,i,s,n,e,o,a,l])}(h,{replace:a,state:u,target:c,preventScrollReset:f,relative:s,unstable_viewTransition:p});return r.createElement("a",Vv({},m,{href:n||v,onClick:y||o?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var Wv,Qv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Wv||(Wv={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qv||(Qv={}));var Hv=n(184);const Yv=()=>{const e=J(),{id:t}=function(){let{matches:e}=r.useContext(Q),t=e[e.length-1];return t?t.params:{}}(),[n,i]=(0,r.useState)({date:"",company:"",service:"",description:"",startTime:"",endTime:""}),[s,o]=(0,r.useState)([]);(0,r.useEffect)((()=>{console.log("getting ".concat(t)),t&&((e,t)=>{console.log("getting ".concat(t)),Lv.firestore().collection("Works").doc(t).get().then((t=>{e(t.data())}))})((e=>i(e)),t)}),[t]);const a=e=>{console.log(n),i({...n,[e.target.name]:e.target.value})};return(0,Hv.jsxs)("div",{className:"card mb-3",children:[(0,Hv.jsxs)("div",{className:"card-header",children:[(0,Hv.jsx)("h2",{children:"Add done work"}),s.map((e=>(0,Hv.jsx)("p",{children:e},e)))]}),(0,Hv.jsx)("div",{className:"card-body",children:(0,Hv.jsxs)("form",{className:"form needs-validation",onSubmit:r=>{r.preventDefault();const i=[];for(var s in n)""===n[s]&&i.push("".concat(s," must not be empty"));var a;0!==i.length?o(i):(t?((e,t)=>{console.log("updating ".concat(e," , ").concat(t.company)),Lv.firestore().collection("Works").doc(e).set(t)})(t,n):(a=n,Lv.firestore().collection("Works").add(a)),e("/works"))},children:[(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("label",{htmlFor:"date",children:"Choose date: "}),(0,Hv.jsx)("input",{className:"form-control",type:"date",name:"date",id:"date",onChange:a,value:n.date,required:!0})]}),(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("label",{htmlFor:"company",children:"Choose company: "}),(0,Hv.jsxs)("select",{name:"company",id:"company",className:"form-control",onChange:a,value:n.company,required:!0,children:[(0,Hv.jsx)("option",{}),(0,Hv.jsx)("option",{value:"com1",children:"Company 1"}),(0,Hv.jsx)("option",{value:"com2",children:"Company 2"}),(0,Hv.jsx)("option",{value:"com3",children:"Company 3"}),(0,Hv.jsx)("option",{value:"com4",children:"Company 4"})]})]}),(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("label",{htmlFor:"service",children:"Choose service: "}),(0,Hv.jsxs)("select",{name:"service",id:"service",className:"form-control",onChange:a,value:n.service,required:!0,children:[(0,Hv.jsx)("option",{}),(0,Hv.jsx)("option",{value:"serv1",children:"Service 1"}),(0,Hv.jsx)("option",{value:"serv2",children:"Service 2"}),(0,Hv.jsx)("option",{value:"serv3",children:"Service 3"}),(0,Hv.jsx)("option",{value:"serv4",children:"Service 4"})]})]}),(0,Hv.jsx)("div",{className:"mb-3",children:(0,Hv.jsx)("textarea",{name:"description",id:"description",placeholder:"Description",className:"form-control",onChange:a,value:n.description,required:!0})}),(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("label",{htmlFor:"startTime",children:"Start time:"}),(0,Hv.jsx)("input",{type:"time",name:"startTime",id:"startTime",className:"form-control",onChange:a,value:n.startTime,required:!0})]}),(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("label",{htmlFor:"endTime",children:"End time:"}),(0,Hv.jsx)("input",{type:"time",name:"endTime",id:"endTime",className:"form-control",onChange:a,value:n.endTime,required:!0})]}),(0,Hv.jsxs)("div",{className:"mb-3",children:[(0,Hv.jsx)("button",{type:"submit",className:"btn btn-primary",children:t?"Update":"Save"}),(0,Hv.jsx)(Gv,{to:"/works",children:(0,Hv.jsx)("button",{className:"btn btn-secondary",children:"Cancel"})})]})]})})]})};var $v=n(7),Xv=n.n($v),Jv=["color","size","title"];function Zv(){return Zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zv.apply(this,arguments)}function ew(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tw=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,s=e.title,o=ew(e,Jv);return r.createElement("svg",Zv({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},o),s?r.createElement("title",null,s):null,r.createElement("path",{d:"M5 4a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm-.5 2.5A.5.5 0 0 1 5 6h6a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5zM5 8a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H5zm0 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1H5z"}),r.createElement("path",{d:"M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm10-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1z"}))}));tw.propTypes={color:Xv().string,size:Xv().oneOfType([Xv().string,Xv().number]),title:Xv().string},tw.defaultProps={color:"currentColor",size:"1em",title:null};const nw=tw;var rw=["color","size","title"];function iw(){return iw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iw.apply(this,arguments)}function sw(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var ow=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,s=e.title,o=sw(e,rw);return r.createElement("svg",iw({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},o),s?r.createElement("title",null,s):null,r.createElement("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r.createElement("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"}))}));ow.propTypes={color:Xv().string,size:Xv().oneOfType([Xv().string,Xv().number]),title:Xv().string},ow.defaultProps={color:"currentColor",size:"1em",title:null};const aw=ow,lw=(e,t)=>{const n=new Date("0001-01-01T".concat(e,"Z")),r=new Date("0001-01-01T".concat(t,"Z"))-n,i=Math.floor(r/1e3/60)%60,s=Math.floor(r/1e3/60/60);return"".concat(s,"h, ").concat(i,"min")},uw=e=>{const{id:t,date:n,company:r,service:i,description:s,startTime:o,endTime:a}=e.data,l=J();return(0,Hv.jsxs)("tr",{children:[(0,Hv.jsx)("td",{children:n}),(0,Hv.jsx)("td",{children:r}),(0,Hv.jsx)("td",{children:i}),(0,Hv.jsx)("td",{children:s}),(0,Hv.jsx)("td",{children:o}),(0,Hv.jsx)("td",{children:a}),(0,Hv.jsx)("td",{children:lw(o,a)}),(0,Hv.jsx)("td",{align:"center",children:(0,Hv.jsx)(Gv,{to:"update/".concat(t),children:(0,Hv.jsx)(nw,{color:"blue",size:"18"})})}),(0,Hv.jsx)("td",{align:"center",children:(0,Hv.jsx)(aw,{color:"red",size:"18",onClick:()=>{console.log("delete ".concat(t)),(e=>{console.log("deleteing ".concat(e)),Lv.firestore().collection("Works").doc(e).delete()})(t),l("/")}})})]},t)},cw=e=>{const t=e.data;return(0,Hv.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,Hv.jsx)("thead",{children:(0,Hv.jsxs)("tr",{children:[(0,Hv.jsx)("th",{children:"Date"}),(0,Hv.jsx)("th",{children:"Client"}),(0,Hv.jsx)("th",{children:"Service"}),(0,Hv.jsx)("th",{children:"Description"}),(0,Hv.jsx)("th",{children:"From"}),(0,Hv.jsx)("th",{children:"To"}),(0,Hv.jsx)("th",{children:"Spend"}),(0,Hv.jsx)("th",{}),(0,Hv.jsx)("th",{})]})}),(0,Hv.jsx)("tbody",{children:t.map((e=>(0,Hv.jsx)(uw,{data:e},e.id)))})]})},hw=()=>{const[e,t]=(0,r.useState)([]);return(0,r.useEffect)((()=>{var e;e=e=>{t(e)},Lv.firestore().collection("Works").onSnapshot((t=>{const n=t.docs.map((e=>({id:e.id,...e.data()})));e(n)}))}),[]),(0,Hv.jsxs)("div",{className:"container",children:[(0,Hv.jsx)("h4",{children:(0,Hv.jsx)(Gv,{to:"add",children:(0,Hv.jsx)("button",{type:"button",className:"btn btn-primary",children:"Add work"})})}),(0,Hv.jsx)(fe,{}),(0,Hv.jsx)(cw,{data:e})]})},dw=()=>(0,Hv.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:(0,Hv.jsxs)("div",{className:"container-fluid",children:[(0,Hv.jsx)("a",{className:"navbar-brand",href:"/",children:"Navbar"}),(0,Hv.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Hv.jsx)("span",{className:"navbar-toggler-icon"})}),(0,Hv.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:(0,Hv.jsxs)("ul",{className:"navbar-nav",children:[(0,Hv.jsx)("li",{className:"nav-item",children:(0,Hv.jsx)(Gv,{className:"nav-link",to:"/",children:"Home"})}),(0,Hv.jsx)("li",{className:"nav-item",children:(0,Hv.jsx)(Gv,{className:"nav-link",to:"/works",children:"Works"})})]})})]})}),fw=()=>(0,Hv.jsx)("div",{children:"Home"}),pw=()=>(0,Hv.jsx)("div",{children:"404"});const mw=function(){return(0,Hv.jsxs)(Hv.Fragment,{children:[(0,Hv.jsx)(dw,{}),(0,Hv.jsxs)(ge,{children:[(0,Hv.jsx)(pe,{index:!0,element:(0,Hv.jsx)(fw,{})}),(0,Hv.jsxs)(pe,{path:"works",element:(0,Hv.jsx)(hw,{}),children:[(0,Hv.jsx)(pe,{path:"add",element:(0,Hv.jsx)(Yv,{})}),(0,Hv.jsx)(pe,{path:"update/:id",element:(0,Hv.jsx)(Yv,{})})]}),(0,Hv.jsx)(pe,{path:"*",element:(0,Hv.jsx)(pw,{})})]})]})};s.createRoot(document.getElementById("root")).render((0,Hv.jsx)(r.StrictMode,{children:(0,Hv.jsx)(jv,{children:(0,Hv.jsx)(mw,{})})}))})()})();
//# sourceMappingURL=main.bed62f57.js.map